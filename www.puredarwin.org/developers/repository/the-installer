<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var b=window,e="chrome",f="tick",g="wtsrt_",h="tbsd_",k="tbnd_",l="start",n="_wtsrt",p="_tbnd";(function(){function m(a){this.t={};this.tick=function(a,c,d){this.t[a]=[void 0!=d?d:(new Date).getTime(),c]};this[f](l,null,a)}var a=new m;b.jstiming={Timer:m,load:a};if(b.performance&&b.performance.timing){var a=b.performance.timing,c=b.jstiming.load,d=a.navigationStart,a=a.responseStart;0<d&&a>=d&&(c[f](n,void 0,d),c[f](g,n,a),c[f](h,g))}try{a=null,b[e]&&b[e].csi&&(a=Math.floor(b[e].csi().pageT),c&&0<d&&(c[f](p,void 0,b[e].csi().startE),c[f](k,p,d))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),
null==a&&b.external&&(a=b.external.pageT,c&&0<d&&(c[f](p,void 0,b.external.startE),c[f](k,p,d))),a&&(b.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="//www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/d24ef8/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d=window,e="length",h="",k="__duration__",l="function";function m(c){return document.getElementById(c)}d.byId=m;function n(c){return c.replace(/^\s+|\s+$/g,h)}d.trim=n;var p=[],q=0;d.JOT_addListener=function(c,a,b){var f=new String(q++);c={eventName:c,handler:a,compId:b,key:f};p.push(c);return f};d.JOT_removeListenerByKey=function(c){for(var a=0;a<p[e];a++)if(p[a].key==c){p.splice(a,1);break}};d.JOT_removeAllListenersForName=function(c){for(var a=0;a<p[e];a++)p[a].eventName==c&&p.splice(a,1)};
d.JOT_postEvent=function(c,a,b){var f={eventName:c,eventSrc:a||{},payload:b||{}};if(d.JOT_fullyLoaded)for(a=p[e],b=0;b<a&&b<p[e];b++){var g=p[b];g&&g.eventName==c&&(f.listenerCompId=g.compId||h,(g=typeof g.handler==l?g.handler:d[g.handler])&&g(f))}else d.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};d.JOT_delayedEvents=[];d.JOT_fullyLoaded=!1;
d.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var f=0;60<=b&&(b/=60,f=2);2<=b&&f++;return a?d.JOT_siteRelTimeStrs[f].replace(k,Math.floor(b)):d.JOT_userRelTimeStrs[f].replace(k,Math.floor(b))}; })()
</script>
<script>


var webspace = {"scottyUrl":"/_/upload","isConsumer":false,"canPublishScriptToAnyone":true,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"sharingUrlPrefix":"/_/sharing","csiReportUri":"http://csi.gstatic.com/csi","sharingPolicy":"OPENED_WITH_INDICATOR","analyticsAccountId":"UA-4515077-1","baseUri":"","name":"puredarwin","domain":"puredarwin.org","features":{"asyncPermanentDelete":false,"horizontalNavLayout":true,"folderEmbed":true,"scottyForTrogImageUpload":false,"moreBackgroundTweaks":true,"flipFolderUrls":true,"animateNavigation":true,"driveInFileCabinet":true,"skiThemeIsDefault":true,"pdfEmbedSupport":false,"animateToc":true,"siteChromeSidebarWidgetsEditDialog":true,"canonicalLinkTagInHead":false,"driveImageEmbed":true,"siteChromeSystemFooterDialog":true,"plusOneButtonOptions":true,"plusOneButton":true,"adSenseDeprecate":true,"photoAlbumsInOnePick":true,"docosHideNotificationSettings":true,"newInsertMenu":true,"skiTheme":true,"siteChromeDialogsToolbar":true,"plusBadge":false,"siteChromeHorizontalNavigationDialog":true,"youTubeEmbedSize":true,"adSenseDeprecateMsg":true,"htmlEmbed":true,"siteChromeHeaderDialog":true,"photoAlbumsGPlusUrlSupport":true,"disableGoogleVideo":true},"adsensePublisherId":"ca-pub-3519492571996731","gvizVersion":1,"siteTitle":"PureDarwin","pageSharingId":"jotspot_page","plusPageId":"","termsUrl":"http://sites.google.com/site/sites/system/app/pages/meta/terms?apps\u003d1","enableAnalytics":true,"isPublic":true,"plusPageUrl":"","homePath":"/","sharingId":"jotspot","isAdsenseEnabled":true,"adsensePromoClickedOrSiteIneligible":true,"isStartPageEnabled":true,"domainAnalyticsAccountId":""};



webspace.gadgets = {"baseUri":"/system/app/pages/gadgets"};


webspace.user = {"uid":"","renderMobile":false,"primaryEmail":"guest","sessionIndex":"","namespaceUser":false,"displayNameOrEmail":"guest","namespace":"","hasAdminAccess":false,"guest_":true,"keyboardShortcuts":true,"domain":"","hasWriteAccess":false,"dasherUser":false,"userName":"guest"};

webspace.page = {"canDeleteWebspace":null,"locale":"en","state":"","wuid":"wuid:gx:11ceb1d650746e73","pageInheritsPermissions":null,"timeZone":"America/Los_Angeles","properties":{},"type":"text","canChangePath":true,"parentWuid":"wuid:gx:c10d3267ff6eebb","revision":25,"title":"The Installer","isRtlLocale":false,"bidiEnabled":false,"siteLocale":"en","name":"the-installer","path":"/developers/repository/the-installer","isSiteRtlLocale":false,"parentPath":"/developers/repository"};
webspace.page.breadcrumbs = [{"title":"For developers","dir":"ltr","path":"/developers","deleted":false},{"title":"PureDarwin repository","dir":"ltr","path":"/developers/repository","deleted":false},{"title":"The Installer","dir":"ltr","path":"/developers/repository/the-installer","deleted":false}];


webspace.editorResources = {
  text: [
    'http://www.gstatic.com/sites/p/d24ef8/system/js/codemirror.js',
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/codemirror_css.css',
    'http://www.gstatic.com/sites/p/d24ef8/system/js/trog_edit__en.js',
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/trogedit.css',
    '/_/rsrc/1381649936000/system/app/css/editor.css',
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/codeeditor.css',
    '/_/rsrc/1381649936000/system/app/css/camelot/editor-jfk.css'
  ],
  sitelayout: [
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/sitelayouteditor.css'
  ]
};

var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/d24ef8/system/app/images/cleardot.gif';


var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];


webspace.siteTemplateId = false;


webspace.page.currentTemplate = {"title":"Web Page","path":"/system/app/pagetemplates/text"};



var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="The Installer - PureDarwin" />
<meta itemprop="name" content="The Installer - PureDarwin" />
<meta property="og:title" content="The Installer - PureDarwin" />
<meta itemprop="image" content="/_/rsrc/1204251241201/config/app/images/customLogo/pd.png?revision=1" />
<meta property="og:image" content="/_/rsrc/1204251241201/config/app/images/customLogo/pd.png?revision=1" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/d24ef8/system/app/themes/default/standard-css-default-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1381649936000/system/app/css/overlay.css?cb=defaultundefineda150goog-ws-left" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1381649936000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>The Installer - PureDarwin</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<script src="//www.gstatic.com/caja/5609/caja.js"> </script>
<script src="http://www.gstatic.com/sites/p/d24ef8/system/js/jot_caja.js"> </script>
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class=""><div class="sites-header-cell-buffer-wrapper"><a href="http://sites.google.com/a/puredarwin.org/puredarwin/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1204251241201/config/app/images/customLogo/pd.png?revision=1" alt="Logo" class="sites-logo " /></a><h2></h2></div></td><td class="sites-layout-searchbox "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container">
</td>
</tr>
</table> 
</div> 
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_5443624057807028" class="sites-embed"><h4 class="sites-embed-title">Navigation</h4><div class="sites-embed-content sites-sidebar-nav"><ul jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/news" jotId="wuid:gx:117960ccf6cea3d3" class="sites-navigation-link">News</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/screenshots" jotId="wuid:gx:381949cce98f8fe1" class="sites-navigation-link">Screenshots</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/downloads" jotId="wuid:gx:19ca24e3c9b23b1a" class="sites-navigation-link">Downloads</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/contact" jotId="wuid:gx:2682c13d3d043499" class="sites-navigation-link">Contact us</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/legal" jotId="wuid:gx:77c2ee3613fb2cc2" class="sites-navigation-link">Legal</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:2258cc2a13247b09" class="sites-navigation-link">Sitemap</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_22101909201592207" class="sites-embed"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><img src="http://www.puredarwin.org/_/rsrc/1211558361866/config/app/images/hi-medium.jpg" style="border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px" /> The goal of this project is to make Darwin more usable by providing an installation ISO, documentation, and add-on software. You are welcome to join #puredarwin on irc.freenode.net if you would like to join PureDarwin development and to add to this site.</div></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_8098985916003585" class="sites-embed"><h4 class="sites-embed-title">Recent site activity</h4><div class="sites-embed-content sites-sidebar-recent-activity"><ul><li><a jotid="wuid:gx:48db54bc6a1c5a93" dir="ltr" href="http://www.puredarwin.org/news/newpuredarwin9l30betarelease">New PureDarwin 1.3 beta release</a><div><span class="sites-text-secondary">edited by PD admin</span></div><div><span class="sites-text-secondary">edited by Daniel Bethe</span></div></li><li><a jotid="wuid:gx:48db54bc6a1c5a93" dir="ltr" href="http://www.puredarwin.org/news/newpuredarwin9l30betarelease">New PureDarwin 9L30 beta release</a><div><span class="sites-text-secondary">edited by Daniel Bethe</span></div><div><span class="sites-text-secondary">created by PD admin</span></div></li><li><a jotid="wuid:gx:117960ccf6cea3d3" dir="ltr" href="http://www.puredarwin.org/news">News</a><div><span class="sites-text-secondary">edited by Ferdinand Klinzer</span></div></li><li><a jotid="wuid:gx:30ad1d3f494a9d46" dir="ltr" href="http://www.puredarwin.org/developers/vmware">VMware</a><div><span class="sites-text-secondary">edited by PD admin</span></div></li><li><a jotid="wuid:gx:52a0425ce78e58d8" dir="ltr" href="http://www.puredarwin.org/news/pcnet32-driver-for-puredarwin">PCnet32 driver for PureDarwin</a><div><span class="sites-text-secondary">edited by PD admin</span></div></li><li class="sites-sidebar-recent-activity-viewall"><a href="/system/app/pages/recentChanges">View All</a></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_08458635257557034" class="sites-embed"><div class="sites-embed-content-notitle"><span jotId="content"><p><script type="text/javascript">
<!--
google_ad_client="pub-3519492571996731";
google_ad_host="pub-6693688277674466";
google_ad_width=120;
google_ad_height=600;
google_ad_format="120x600_as";
google_ad_type="text_image";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="000000";
google_color_url="4E7DBF";
google_color_text="5E6A72";
//-->
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</p></span></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A dir="ltr" href="/developers">For developers</A>‎ &gt; ‎<A dir="ltr" href="/developers/repository">PureDarwin repository</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr">The Installer</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr">This page is a "request for comments" related to the general installation process. Please feel free to contribute and comment.<br /><div>Through the general install process the installer should be able to also install itself.</div><div><br /></div><div><div>
<div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:456px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-The-Installation-Process"><strong>1 </strong>The Installation Process</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-First-stage"><strong>1.1 </strong>First stage</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Pre-configuration-and-questions"><strong>1.1.1 </strong>Pre-configuration and questions</a></li><li class="goog-toc"><a href="#TOC-Preparation-of-destination-media"><strong>1.1.2 </strong>Preparation of destination media</a></li><li class="goog-toc"><a href="#TOC-First-Stage-Installer-Script"><strong>1.1.3 </strong>First Stage Installer Script</a></li></ol></li><li class="goog-toc"><a href="#TOC-Second-stage"><strong>1.2 </strong>Second stage</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Copying-across-and-installing-packages"><strong>1.2.1 </strong>Copying across and installing packages</a></li><li class="goog-toc"><a href="#TOC-Post-configuration"><strong>1.2.2 </strong>Post-configuration</a></li></ol></li></ol></li></ol></div></div></div></div>
<h2><a name="TOC-The-Installation-Process"></a>The Installation Process</h2><div>Installing PureDarwin should be a two stage process, as illustrated here.</div><div><br /></div><div><div style="text-align:left;display:block;margin-right:auto;margin-left:auto"><a href="http://www.puredarwin.org/developers/repository/the-installer/install.png?attredirects=0" imageanchor="1"><img border="0" height="221" src="http://www.puredarwin.org/_/rsrc/1263242453465/developers/repository/the-installer/install.png?height=221&amp;width=420" width="420" /></a></div><h3><a name="TOC-First-stage"></a>First stage</h3><div style="text-align:left;display:block;margin-right:auto;margin-left:auto">The first stage installer is run from either a PureDarwin CD image, or from another operating system on the target computer. The first stage should:</div><div style="text-align:left;display:block;margin-right:auto;margin-left:auto"><ul><li>Partition the target disk, if desired.</li><li>Format the target partition.</li><li>Install the PureDarwin Core package. This will provide all of the utilities and services necessary to allow the second stage installer to complete successfully.</li><li>Install the appropriate bootloaders (<span style="font-style:italic">/usr/standalone/i386 -&gt; install bootloader into MBR (beginning of disk), boot sector (beginning of partition), grub and HFS startup file (alternatively /boot)</span>), according to user choice and whether it will be a multi-boot system. The user will have the choice of MBR (Chameleon) or EFI. The question should be "Is this a Mac or VMware Fusion?" If they answer "yes", install the EFI bootloader; if they answer "no", install MBR.</li><li>Reboot the system when done.</li></ul><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/repository/the-installer/firststage.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.puredarwin.org/_/rsrc/1263242453465/developers/repository/the-installer/firststage.png" /></a></div></div><div style="text-align:left;display:block;margin-right:auto;margin-left:auto"><span style="font-style:italic"><span style="font-style:normal"><div><h4><a name="TOC-Pre-configuration-and-questions"></a>Pre-configuration and questions</h4></div><div>The user will be asked a quick list of questions. The question must always have a default answer available and "compatible" with all others answers of previous and next questions.</div><div><ul style="margin-right:10px"><li style="padding-top:1px;padding-right:0px;padding-bottom:1px;padding-left:0px"><span style="font-weight:bold">Interactive mode</span> (advanced)<br />Questions, questions and questions...<span style="border-collapse:separate;font-family:arial"> settings in details can be set.<br /><span style="border-collapse:collapse;color:rgb(39,78,19);font-family:Arial">MODE=3</span> </span></li><li style="padding-top:1px;padding-right:0px;padding-bottom:1px;padding-left:0px"><span style="border-collapse:separate;font-weight:bold">Semi interactive mode</span><span style="border-collapse:separate"> (standard)<br />Questions and questions.<br /><span style="border-collapse:collapse;color:rgb(39,78,19)">MODE=2</span></span></li><li style="padding-top:1px;padding-right:0px;padding-bottom:1px;padding-left:0px"><span style="border-collapse:separate"><span style="font-weight:bold">Non interactive mode</span> (full)<br /><span style="border-collapse:collapse;color:rgb(39,78,19)">MODE=1</span><br /><span style="border-collapse:collapse">Provide a<span style="border-collapse:separate;color:rgb(51,51,51)"><span style="font-family:arial,sans-serif"><span style="font-size:small"><span style="color:rgb(0,0,0)"> fast and rough</span></span></span><span style="font-family:arial,sans-serif"><span style="font-size:small"><span style="color:rgb(0,0,0)"> default setup with everything</span></span></span></span></span></span></li><li style="padding-top:1px;padding-right:0px;padding-bottom:1px;padding-left:0px"><span style="font-weight:bold">Non interactive mode</span> (automatic)<br /><span style="color:rgb(39,78,19)">MODE=0</span><br />When the second stage installer runs, it should check for the presence of a configuration file in a specific location.<br />If it finds it, it should read all settings from here and complete the installation without asking the user any more question. If this file isn't found then it should continue with the standard interactive installation. If not all settings has been provided in the present file, it should continue filling with the default value or (alternatively jump into interactive mode. <span style="text-decoration:underline">Caution</span> about this fact, because if "the user" explicitly has chosen "non interactive mode", it is not to fall into interactive mode because 1 settings is missing in the file).</li></ul></div></span></span></div></div></div></div><blockquote style="margin:0 0 0 40px;border:none;padding:0px">"Non-interactive mode" will require the user (eg. system admin) to do some extra work. The installer should always automatically attempt to copy non-interactive configuration files from a set location on the boot CD (eg. in /Library/Install/ ) to the target disk. In order to make use of this facility, a boot CD with files in this location should be specially prepared. We can make a root of the install CD, along with the pd_makedmg script, available for download for exactly this purpose.<br /><br /></blockquote><div><div><div><div style="text-align:left;display:block;margin-right:auto;margin-left:auto"><span style="font-style:italic"><span style="font-style:normal"><div>Grouping in categories and sub-categories the sequences of questions seems common. </div><div><br /></div><div><span style="border-collapse:separate">This leads us to another possibilities, we could also target a type of PureDarwin release installed (e.g., nano, dev, rescue, test/bench, etc..).</span></div><div><br /></div></span></span></div></div></div></div><div><div><div><div style="text-align:left;display:block;margin-right:auto;margin-left:auto"><span style="font-style:italic"><span style="font-style:normal"><div><span style="text-decoration:underline">Notes:</span> We can't depend on what admin tools are loaded onto the target (having the core system ship without eg. the DSTools package), so user records should be created by generating the data files (a la pd_injectuser) rather than via tools (pd_adduser).</div><h4><a name="TOC-Preparation-of-destination-media"></a>Preparation of destination media</h4><div>Partitioning the destination disk, formatting, installing bootloader. This stage could also see the installation of the kernel(s) and a core system so that the rest of the install process could run from the destination, as outlined above.</div><div><br /></div><div><span style="text-decoration:underline">Notes:</span> We need to know from where we can put and provide the installation materials and to where the PureDarwin project will be installed. e.g., disk, but we have also: iso and VMware, qemu and other democratised emulation/simulation/virtualisation solution.</div><div><br /></div></span></span><h4><a name="TOC-First-Stage-Installer-Script"></a>First Stage Installer Script</h4><div style="display:block;text-align:left">An installer script will be needed to guide the user through the first stage installation. A rough idea of how this would work (using the Chameleon bootloader components replacing the standard Darwin ones in /usr/standalone/i386/) is:</div><div style="display:block;text-align:left"><ul><li>Show the user a list of attached drives and ask them to choose one.</li><li>Show the user a list of partitions on the chosen drive, and ask them to choose one or enter the fdisk interactive partitioner.</li><li>If the user chose to partition the disk, restart the system so that the changes take effect.</li><li>Once the user has chosen a disk (number = <span style="font-family:courier new,monospace">$disk</span>) and partition (number = <span style="font-family:courier new,monospace">$part</span>) to install on, we can ask them for a volume name (<span style="font-family:courier new,monospace">$name</span>) to give it, and then without further interaction:</li><ul><li><span style="font-family:courier new,monospace"><span style="font-size:small">newfs_hfs -s -J -v [$name] /dev/rdisk[$disk]s[$part]</span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">dd if=/usr/standalone/i386/boot1h of=/dev/rdisk[$disk]s[$part]</span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">mount -t hfs /dev/disk[$disk]s[$part] /tmp</span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">cp /usr/standalone/i386/boot /tmp/ </span></span><span><span style="font-family:arial,sans-serif"><span style="font-size:small">(for MBR)</span></span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">tar xfz /usr/standalone/PureDarwinCore.root.tar.gz -C /tmp/</span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">umount /tmp</span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">echo 'Remove CD-ROM...'</span></span></li><li><span style="font-family:courier new,monospace"><span style="font-size:small">shutdown -r now</span></span></li></ul></ul>And we're on to the second stage install.</div><div style="display:block;text-align:left"><span style="color:rgb(85,26,139);text-decoration:underline"><br /></span></div></div></div><div>Correctly setting up bootloaders is a tricky business, especially in a multi-boot environment. One of the advantages of this two stage approach is that the user will find out if the system can successfully boot into Darwin before spending time installing (potentially involving lengthy downloads) all the packages needed by a complete system. </div><div><br /></div><div><span style="font-weight:bold"><span style="font-style:italic">Comment: </span></span><span style="font-style:italic">See the </span><a href="http://www.puredarwin.org/developers/booting/boot"><span style="font-style:italic">boot</span></a><span style="font-style:italic"> page for setting up the bootloader</span></div><h3><a name="TOC-Second-stage"></a>Second stage</h3><div>The second stage installer will be designed to run in a Darwin environment, meaning that it will be exactly the same no matter what the first stage installer was.</div><div><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/repository/the-installer/secondstage.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.puredarwin.org/_/rsrc/1263242453465/developers/repository/the-installer/secondstage.png" /></a></div></div><div>In this way we will be moving the environment-specific parts of setup into the first stage (of which there will be a few different platform-specific versions), consequently we only need to maintain a single version of the main installation code.</div><div>It will possibly need access to a network connection, although providing a local cache of packages will make this unnecessary.</div><div><br /></div><div>"PureDarwin Core" is basically (in minimal PureDarwin installation which automatically runs a setup and install script at boot) allowing the user to add extra packages to.</div><div>It should be possible for the user to chose not to install anything an be left with a working, bare-bones system.</div><div><br /></div><div>("PureDarwin Boot" above is a fictional version of Nano equipped with the extra packages needed to run <span style="font-family:courier new,monospace"><span style="font-size:small">pd_setup</span></span>)</div><div><h4><a name="TOC-Copying-across-and-installing-packages"></a>Copying across and installing packages</h4></div><div>This is covered on the <a href="http://www.puredarwin.org/developers/package-management">Package management</a> page.</div><h4><a name="TOC-Post-configuration"></a>Post-configuration</h4><div>This will include adding users (a default one is provided if no user account has been created) to the system and some settings.</div><div><br /></div><div>The choices (configuring details such as the system timezone, preferred language, keyboard layouts, etc...) made by the user at the "pre-configuration" phase let the installation to be finish without the user waiting around..</div><div><hr /></div><div><span style="font-style:italic">A final question could be (or not) to fall into a shell or to reboot (on timeout too).</span></div></div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
<a xmlns="http://www.w3.org/1999/xhtml" name="page-comments"></a>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-comments"><div class="sites-comment-docos-wrapper"><div class="sites-comment-docos"><div class="sites-comment-docos-background"></div><div class="sites-comment-docos-header"><div class="sites-comment-docos-header-title">Comments</div></div><div id="sites-comment-docos-pane" class="sites-comment-docos-pane"></div></div></div></div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/puredarwin.org/puredarwin/developers/repository/the-installer">Sign in</a>|<a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a>|<a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a>|<a class="sites-system-link" href="/system/app/pages/removeAccess" target="_blank">Remove Access</a>|<span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>

<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/d24ef8/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
    
        sites.core.Analytics.createTracker();
        sites.core.Analytics.trackPageview();
      
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("5443624057807028", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_5443624057807028');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
          JOT_addListener('titleChange', 'JOT_RECENTCHANGES_titleChange', 'COMP_8098985916003585');
        </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
              new sites.CommentPane('//docs.google.com/comments/d/AAHRpnXuiEJWuCB_LZagUAJWJE5fSAeie3STAS7tAHgFfprp4c13m5oSF2XaZjI6s75Aw9g0E-5Q6fIfYPTgVqCtJaQzoBq_isOoHY4fsYE3qK3vzF8cVZD6gr9xhuRGjqWXZn938sAzy/api/js?anon=true', true, true,
                  false, false);
            </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.puredarwin.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type;
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
 //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
              JOT_postEvent('renderPlus', null, 'sites-chrome-main');
            </script>
<div id="server-timer-div" style="display:none"> </div>
<script>
          window.jstiming.load.tick('render');
        </script>
</body>
</html>
