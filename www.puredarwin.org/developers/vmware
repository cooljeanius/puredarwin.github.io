<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/WebPage">
<head>
<meta http-equiv="X-UA-Compatible" content="chrome=1" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var b=window,e="chrome",f="tick",g="wtsrt_",h="tbsd_",k="tbnd_",l="start",n="_wtsrt",p="_tbnd";(function(){function m(a){this.t={};this.tick=function(a,c,d){this.t[a]=[void 0!=d?d:(new Date).getTime(),c]};this[f](l,null,a)}var a=new m;b.jstiming={Timer:m,load:a};if(b.performance&&b.performance.timing){var a=b.performance.timing,c=b.jstiming.load,d=a.navigationStart,a=a.responseStart;0<d&&a>=d&&(c[f](n,void 0,d),c[f](g,n,a),c[f](h,g))}try{a=null,b[e]&&b[e].csi&&(a=Math.floor(b[e].csi().pageT),c&&0<d&&(c[f](p,void 0,b[e].csi().startE),c[f](k,p,d))),null==a&&b.gtbExternal&&(a=b.gtbExternal.pageT()),
null==a&&b.external&&(a=b.external.pageT,c&&0<d&&(c[f](p,void 0,b.external.startE),c[f](k,p,d))),a&&(b.jstiming.pt=a)}catch(q){}})(); })()
</script>
<link rel="shortcut icon" type="image/x-icon" href="//www.google.com/images/icons/product/sites-16.ico" />
<link rel="apple-touch-icon" href="http://www.gstatic.com/sites/p/d24ef8/system/app/images/apple-touch-icon.png" type="image/png" />
<script type="text/javascript">/* Copyright 2008 Google. */ (function() { var d=window,e="length",h="",k="__duration__",l="function";function m(c){return document.getElementById(c)}d.byId=m;function n(c){return c.replace(/^\s+|\s+$/g,h)}d.trim=n;var p=[],q=0;d.JOT_addListener=function(c,a,b){var f=new String(q++);c={eventName:c,handler:a,compId:b,key:f};p.push(c);return f};d.JOT_removeListenerByKey=function(c){for(var a=0;a<p[e];a++)if(p[a].key==c){p.splice(a,1);break}};d.JOT_removeAllListenersForName=function(c){for(var a=0;a<p[e];a++)p[a].eventName==c&&p.splice(a,1)};
d.JOT_postEvent=function(c,a,b){var f={eventName:c,eventSrc:a||{},payload:b||{}};if(d.JOT_fullyLoaded)for(a=p[e],b=0;b<a&&b<p[e];b++){var g=p[b];g&&g.eventName==c&&(f.listenerCompId=g.compId||h,(g=typeof g.handler==l?g.handler:d[g.handler])&&g(f))}else d.JOT_delayedEvents.push({eventName:c,eventSrc:a,payload:b})};d.JOT_delayedEvents=[];d.JOT_fullyLoaded=!1;
d.JOT_formatRelativeToNow=function(c,a){var b=((new Date).getTime()-c)/6E4;if(1440<=b||0>b)return null;var f=0;60<=b&&(b/=60,f=2);2<=b&&f++;return a?d.JOT_siteRelTimeStrs[f].replace(k,Math.floor(b)):d.JOT_userRelTimeStrs[f].replace(k,Math.floor(b))}; })()
</script>
<script>


var webspace = {"scottyUrl":"/_/upload","isConsumer":false,"canPublishScriptToAnyone":true,"serverFlags":{"cajaBaseUrl":"//www.gstatic.com/caja","cajaDebugMode":false},"sharingUrlPrefix":"/_/sharing","csiReportUri":"http://csi.gstatic.com/csi","sharingPolicy":"OPENED_WITH_INDICATOR","analyticsAccountId":"UA-4515077-1","baseUri":"","name":"puredarwin","domain":"puredarwin.org","features":{"asyncPermanentDelete":false,"horizontalNavLayout":true,"folderEmbed":true,"scottyForTrogImageUpload":false,"moreBackgroundTweaks":true,"flipFolderUrls":true,"animateNavigation":true,"driveInFileCabinet":true,"skiThemeIsDefault":true,"pdfEmbedSupport":false,"animateToc":true,"siteChromeSidebarWidgetsEditDialog":true,"canonicalLinkTagInHead":false,"driveImageEmbed":true,"siteChromeSystemFooterDialog":true,"plusOneButtonOptions":true,"plusOneButton":true,"adSenseDeprecate":true,"photoAlbumsInOnePick":true,"docosHideNotificationSettings":true,"newInsertMenu":true,"skiTheme":true,"siteChromeDialogsToolbar":true,"plusBadge":false,"siteChromeHorizontalNavigationDialog":true,"youTubeEmbedSize":true,"adSenseDeprecateMsg":true,"htmlEmbed":true,"siteChromeHeaderDialog":true,"photoAlbumsGPlusUrlSupport":true,"disableGoogleVideo":true},"adsensePublisherId":"ca-pub-3519492571996731","gvizVersion":1,"siteTitle":"PureDarwin","pageSharingId":"jotspot_page","plusPageId":"","termsUrl":"http://sites.google.com/site/sites/system/app/pages/meta/terms?apps\u003d1","enableAnalytics":true,"isPublic":true,"plusPageUrl":"","homePath":"/","sharingId":"jotspot","isAdsenseEnabled":true,"adsensePromoClickedOrSiteIneligible":true,"isStartPageEnabled":true,"domainAnalyticsAccountId":""};



webspace.gadgets = {"baseUri":"/system/app/pages/gadgets"};


webspace.user = {"uid":"","renderMobile":false,"primaryEmail":"guest","sessionIndex":"","namespaceUser":false,"displayNameOrEmail":"guest","namespace":"","hasAdminAccess":false,"guest_":true,"keyboardShortcuts":true,"domain":"","hasWriteAccess":false,"dasherUser":false,"userName":"guest"};

webspace.page = {"canDeleteWebspace":null,"locale":"en","state":"","wuid":"wuid:gx:30ad1d3f494a9d46","pageInheritsPermissions":null,"timeZone":"America/Los_Angeles","properties":{},"type":"text","canChangePath":true,"parentWuid":"wuid:gx:57f8d6af16b5f34e","revision":50,"title":"VMware","isRtlLocale":false,"bidiEnabled":false,"siteLocale":"en","name":"vmware","path":"/developers/vmware","isSiteRtlLocale":false,"parentPath":"/developers"};
webspace.page.breadcrumbs = [{"title":"For developers","dir":"ltr","path":"/developers","deleted":false},{"title":"VMware","dir":"ltr","path":"/developers/vmware","deleted":false}];


webspace.editorResources = {
  text: [
    'http://www.gstatic.com/sites/p/d24ef8/system/js/codemirror.js',
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/codemirror_css.css',
    'http://www.gstatic.com/sites/p/d24ef8/system/js/trog_edit__en.js',
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/trogedit.css',
    '/_/rsrc/1381649936000/system/app/css/editor.css',
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/codeeditor.css',
    '/_/rsrc/1381649936000/system/app/css/camelot/editor-jfk.css'
  ],
  sitelayout: [
    'http://www.gstatic.com/sites/p/d24ef8/system/app/css/sitelayouteditor.css'
  ]
};

var JOT_clearDotPath = 'http://www.gstatic.com/sites/p/d24ef8/system/app/images/cleardot.gif';


var JOT_userRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];


webspace.siteTemplateId = false;


webspace.page.currentTemplate = {"title":"Web Page","path":"/system/app/pagetemplates/text"};



var JOT_siteRelTimeStrs = ["a minute ago","__duration__ minutes ago","an hour ago","__duration__ hours ago"];

</script>
<script type="text/javascript">
                window.jstiming.load.tick('scl');
              </script>
<meta name="title" content="VMware - PureDarwin" />
<meta itemprop="name" content="VMware - PureDarwin" />
<meta property="og:title" content="VMware - PureDarwin" />
<meta itemprop="image" content="/_/rsrc/1204251241201/config/app/images/customLogo/pd.png?revision=1" />
<meta property="og:image" content="/_/rsrc/1204251241201/config/app/images/customLogo/pd.png?revision=1" />
<style type="text/css">
</style>
<link rel="stylesheet" type="text/css" href="http://www.gstatic.com/sites/p/d24ef8/system/app/themes/default/standard-css-default-ltr-ltr.css" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1381649936000/system/app/css/overlay.css?cb=defaultundefineda150goog-ws-left" />
<link rel="stylesheet" type="text/css" href="/_/rsrc/1381649936000/system/app/css/camelot/allthemes-view.css" />
<!--[if IE]>
          <link rel="stylesheet" type="text/css" href="/system/app/css/camelot/allthemes%2die.css" />
        <![endif]-->
<title>VMware - PureDarwin</title>
<script type="text/javascript">
                window.jstiming.load.tick('cl');
              </script>
</head>
<body xmlns="http://www.google.com/ns/jotspot" id="body" class=" en            ">
<script src="//www.gstatic.com/caja/5609/caja.js"> </script>
<script src="http://www.gstatic.com/sites/p/d24ef8/system/js/jot_caja.js"> </script>
<div id="sites-page-toolbar" class="sites-header-divider">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-status" class="sites-status" style="display:none;"><div id="sites-notice" class="sites-notice" role="status" aria-live="assertive"> </div></div>
</div>
<div id="sites-chrome-everything-scrollbar">
<div id="sites-chrome-everything">
<div id="sites-chrome-page-wrapper" style="direction: ltr">
<div id="sites-chrome-page-wrapper-inside">
<div xmlns="http://www.w3.org/1999/xhtml" id="sites-chrome-header-wrapper" style="height:auto;">
<table id="sites-chrome-header" class="sites-layout-hbox" cellspacing="0" style="height:auto;">
<tr class="sites-header-primary-row" id="sites-chrome-userheader">
<td id="sites-header-title" class=""><div class="sites-header-cell-buffer-wrapper"><a href="http://sites.google.com/a/puredarwin.org/puredarwin/" id="sites-chrome-userheader-logo"><img id="logo-img-id" src="/_/rsrc/1204251241201/config/app/images/customLogo/pd.png?revision=1" alt="Logo" class="sites-logo " /></a><h2></h2></div></td><td class="sites-layout-searchbox "><div class="sites-header-cell-buffer-wrapper"><form id="sites-searchbox-form" action="/system/app/pages/search"><input type="hidden" id="sites-searchbox-scope" name="scope" value="search-site" /><input type="text" id="jot-ui-searchInput" name="q" size="20" value="" aria-label="Search this site" /><div id="sites-searchbox-button-set" class="goog-inline-block"><div role="button" id="sites-searchbox-search-button" class="goog-inline-block jfk-button jfk-button-standard" tabindex="0">Search this site</div></div></form></div></td>
</tr>
<tr class="sites-header-secondary-row" id="sites-chrome-horizontal-nav">
<td colspan="2" id="sites-chrome-header-horizontal-nav-container">
</td>
</tr>
</table> 
</div> 
<div id="sites-chrome-main-wrapper">
<div id="sites-chrome-main-wrapper-inside">
<table id="sites-chrome-main" class="sites-layout-hbox" cellspacing="0" cellpadding="{scmCellpadding}" border="0">
<tr>
<td id="sites-chrome-sidebar-left" class="sites-layout-sidebar-left" style="width:150px">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_5443624057807028" class="sites-embed"><h4 class="sites-embed-title">Navigation</h4><div class="sites-embed-content sites-sidebar-nav"><ul jotId="navList"><li class="nav-first "><div dir="ltr" style="padding-left: 5px;"><a href="/news" jotId="wuid:gx:117960ccf6cea3d3" class="sites-navigation-link">News</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/screenshots" jotId="wuid:gx:381949cce98f8fe1" class="sites-navigation-link">Screenshots</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/downloads" jotId="wuid:gx:19ca24e3c9b23b1a" class="sites-navigation-link">Downloads</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/contact" jotId="wuid:gx:2682c13d3d043499" class="sites-navigation-link">Contact us</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/legal" jotId="wuid:gx:77c2ee3613fb2cc2" class="sites-navigation-link">Legal</a></div></li><li class=""><div dir="ltr" style="padding-left: 5px;"><a href="/system/app/pages/sitemap/hierarchy" jotId="wuid:gx:2258cc2a13247b09" class="sites-navigation-link">Sitemap</a></div></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_22101909201592207" class="sites-embed"><h4 class="sites-embed-title"></h4><div class="sites-embed-content sites-embed-content-sidebar-textbox"><div dir="ltr"><img src="http://www.puredarwin.org/_/rsrc/1211558361866/config/app/images/hi-medium.jpg" style="border-top-width:0px;border-right-width:0px;border-bottom-width:0px;border-left-width:0px" /> The goal of this project is to make Darwin more usable by providing an installation ISO, documentation, and add-on software. You are welcome to join #puredarwin on irc.freenode.net if you would like to join PureDarwin development and to add to this site.</div></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_8098985916003585" class="sites-embed"><h4 class="sites-embed-title">Recent site activity</h4><div class="sites-embed-content sites-sidebar-recent-activity"><ul><li><a jotid="wuid:gx:48db54bc6a1c5a93" dir="ltr" href="http://www.puredarwin.org/news/newpuredarwin9l30betarelease">New PureDarwin 1.3 beta release</a><div><span class="sites-text-secondary">edited by PD admin</span></div><div><span class="sites-text-secondary">edited by Daniel Bethe</span></div></li><li><a jotid="wuid:gx:48db54bc6a1c5a93" dir="ltr" href="http://www.puredarwin.org/news/newpuredarwin9l30betarelease">New PureDarwin 9L30 beta release</a><div><span class="sites-text-secondary">edited by Daniel Bethe</span></div><div><span class="sites-text-secondary">created by PD admin</span></div></li><li><a jotid="wuid:gx:117960ccf6cea3d3" dir="ltr" href="http://www.puredarwin.org/news">News</a><div><span class="sites-text-secondary">edited by Ferdinand Klinzer</span></div></li><li><a jotid="wuid:gx:30ad1d3f494a9d46" dir="ltr" href="http://www.puredarwin.org/developers/vmware">VMware</a><div><span class="sites-text-secondary">edited by PD admin</span></div></li><li><a jotid="wuid:gx:52a0425ce78e58d8" dir="ltr" href="http://www.puredarwin.org/news/pcnet32-driver-for-puredarwin">PCnet32 driver for PureDarwin</a><div><span class="sites-text-secondary">edited by PD admin</span></div></li><li class="sites-sidebar-recent-activity-viewall"><a href="/system/app/pages/recentChanges">View All</a></li></ul></div></div>
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_08458635257557034" class="sites-embed"><div class="sites-embed-content-notitle"><span jotId="content"><p><script type="text/javascript">
<!--
google_ad_client="pub-3519492571996731";
google_ad_host="pub-6693688277674466";
google_ad_width=120;
google_ad_height=600;
google_ad_format="120x600_as";
google_ad_type="text_image";
google_color_border="FFFFFF";
google_color_bg="FFFFFF";
google_color_link="000000";
google_color_url="4E7DBF";
google_color_text="5E6A72";
//-->
</script>
<script type="text/javascript" src="//pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</p></span></div></div>
</td>
<td id="sites-canvas-wrapper">
<div id="sites-canvas">
<div id="goog-ws-editor-toolbar-container"> </div>
<div xmlns="http://www.w3.org/1999/xhtml" id="title-crumbs" style="">
<A dir="ltr" href="/developers">For developers</A>‎ &gt; ‎
  </div>
<h3 xmlns="http://www.w3.org/1999/xhtml" id="sites-page-title-header" style="" align="left">
<span id="sites-page-title" dir="ltr">VMware</span>
</h3>
<div id="sites-canvas-main" class="sites-canvas-main">
<div id="sites-canvas-main-content">
<table xmlns="http://www.w3.org/1999/xhtml" cellspacing="0" class="sites-layout-name-one-column sites-layout-hbox"><tbody><tr><td class="sites-layout-tile sites-tile-name-content-1"><div dir="ltr"><div><div style="margin:5px 10px;display:inline;float:right"><span>    </span><a href="http://www.puredarwin.org/developers/vmware/vmware.gif?attredirects=0" imageanchor="1"><img border="0" src="http://www.puredarwin.org/_/rsrc/1247515808697/developers/vmware/vmware.gif" /></a></div></div>Many <a href="http://www.vmware.com/" rel="nofollow">VMware</a> products are now able to run a Darwin system (e.g., PureDarwin).<div><br /><div>From <i>VMware Fusion 2.0</i> (Mac OS X) to <i>VMware Player 2.5 </i>(free download for Windows and Linux) via <i>VMware ESX</i> and later versions, PureDarwin should boot without any troubles.</div><div><br /></div><div><b>A more precise list will be constituted if respective <a href="http://www.puredarwin.org/todo">feedback</a> is received.<br /></b><div>
<br />
<div class="sites-embed-align-left-wrapping-off"><div class="sites-embed-border-off sites-embed" style="width:357px;"><div class="sites-embed-content sites-embed-type-toc"><div class="goog-toc sites-embed-toc-maxdepth-6"><p>Contents</p><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Running-PureDarwin-in-VMware"><strong>1 </strong>Running PureDarwin in VMware</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Requirements"><strong>1.1 </strong>Requirements</a></li><li class="goog-toc"><a href="#TOC-Using-VMware-other-than-Fusion-"><strong>1.2 </strong>Using VMware other than Fusion </a></li></ol></li><li class="goog-toc"><a href="#TOC-Settings"><strong>2 </strong>Settings</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-VMware-settings"><strong>2.1 </strong>VMware settings</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Enable-the-built-in-VNC-server"><strong>2.1.1 </strong>Enable the built-in VNC server</a></li></ol></li><li class="goog-toc"><a href="#TOC-Boot-arguments"><strong>2.2 </strong>Boot arguments</a></li><li class="goog-toc"><a href="#TOC-Faking-guest-OS-detection"><strong>2.3 </strong>Faking guest OS detection</a></li></ol></li><li class="goog-toc"><a href="#TOC-Devices"><strong>3 </strong>Devices</a></li><li class="goog-toc"><a href="#TOC-Boot"><strong>4 </strong>Boot</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-VMware-Fusion-BIOS"><strong>4.1 </strong>VMware Fusion BIOS</a></li><li class="goog-toc"><a href="#TOC-Bootloader"><strong>4.2 </strong>Bootloader</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-darwin.iso"><strong>4.2.1 </strong>darwin.iso</a></li></ol></li><li class="goog-toc"><a href="#TOC-Single-user-mode"><strong>4.3 </strong>Single user mode</a></li><li class="goog-toc"><a href="#TOC-Multi-user-mode"><strong>4.4 </strong>Multi user mode</a></li></ol></li><li class="goog-toc"><a href="#TOC-Network"><strong>5 </strong>Network</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Emulated-NICs"><strong>5.1 </strong>Emulated NICs</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-e1000"><strong>5.1.1 </strong>e1000</a></li></ol></li><li class="goog-toc"><a href="#TOC-Status"><strong>5.2 </strong>Status</a></li></ol></li><li class="goog-toc"><a href="#TOC-e1000-support-quest"><strong>6 </strong>e1000 support quest</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Notions"><strong>6.1 </strong>Notions</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Driver-and-IOPCIDevice"><strong>6.1.1 </strong>Driver and IOPCIDevice</a></li><li class="goog-toc"><a href="#TOC-PCI-matching-summarization"><strong>6.1.2 </strong>PCI matching summarization</a></li></ol></li><li class="goog-toc"><a href="#TOC-Vendor-and-Device-IDs"><strong>6.2 </strong>Vendor and Device IDs</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-Vendor-ID-intel-def.-"><strong>6.2.1 </strong>Vendor ID (intel def.)</a></li><li class="goog-toc"><a href="#TOC-Device-ID-Intel-def.-"><strong>6.2.2 </strong>Device ID (Intel def.)</a></li><li class="goog-toc"><a href="#TOC-PCI-configuration-space-registers-"><strong>6.2.3 </strong>PCI configuration space registers </a></li><li class="goog-toc"><a href="#TOC-PCI-matching-dictionary"><strong>6.2.4 </strong>PCI matching dictionary</a></li></ol></li><li class="goog-toc"><a href="#TOC-Real-KEXTs"><strong>6.3 </strong>Real KEXTs</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-w-o-KEXT"><strong>6.3.1 </strong>w/o KEXT</a></li><li class="goog-toc"><a href="#TOC-AppleIntel8255x"><strong>6.3.2 </strong>AppleIntel8255x</a></li><li class="goog-toc"><a href="#TOC-Intel82566MM"><strong>6.3.3 </strong>Intel82566MM</a></li><li class="goog-toc"><a href="#TOC-AppleIntel8254XEthernet"><strong>6.3.4 </strong>AppleIntel8254XEthernet</a></li></ol></li><li class="goog-toc"><a href="#TOC-a-KEXT-pseudo-life"><strong>6.4 </strong>a KEXT pseudo-life</a></li><li class="goog-toc"><a href="#TOC-Host-NIC"><strong>6.5 </strong>Host NIC</a></li></ol></li><li class="goog-toc"><a href="#TOC-Troubleshooting"><strong>7 </strong>Troubleshooting</a><ol class="goog-toc"><li class="goog-toc"><a href="#TOC-On-read-only-medium"><strong>7.1 </strong>On read-only medium</a></li><li class="goog-toc"><a href="#TOC-Random-log"><strong>7.2 </strong>Random log</a></li></ol></li><li class="goog-toc"><a href="#TOC-Resources"><strong>8 </strong>Resources</a></li></ol></div></div></div></div>
<h2><a name="TOC-Running-PureDarwin-in-VMware"></a>Running PureDarwin in VMware</h2><div>It is very easy to run PureDarwin with VMware.</div><div><h3><a name="TOC-Requirements"></a>Requirements</h3><div><ul><li>a VMware product</li><li>a PureDarwin system (can be downloaded or produced)</li><ul><li>a ready-to-run .vmwarevm (read-write) or .vmdk</li><li>a PureDarwin ISO, and either use it directly (read-only)<br />This ISO can be converted into a VMware disk image (.vmdk) file using a little conversion tool called `qemu-img'.<br />The resulting disk image will be read-write, and can be mounted by double-clicking so that you can change its contents from the host system:<br /><span style="font-family:courier new,monospace;font-size:small;white-space:pre">qemu-img convert -O vmdk PureDarwin.iso PureDarwin.vmdk</span></li></ul></ul></div></div><div>Launch VMware Fusion 2.0 or later and create a new machine based on the ISO or .vmdk - VMware Fusion will automatically recognize it as "Mac OS X Server" and configure the virtual machine accordingly. You do not need to change any settings. </div><div><h3><a name="TOC-Using-VMware-other-than-Fusion-"></a>Using VMware other than Fusion </h3><div>Two KEXTs appeard useful for VMware release(s) other than Fusion:</div><div><div><ul><li>LegacyAppleIntelPIIXATA</li><li>NullCPUPowerManagement</li></ul></div><div>They can be found in VMware-Drivers-OpenSource.zip. See <a href="http://www.puredarwin.org/downloads" style="color:rgb(78,125,191);outline-style:none">Downloads</a> page.</div></div></div><div><div><h2><a name="TOC-Settings"></a>Settings</h2>
<h3><a name="TOC-VMware-settings"></a>VMware settings</h3><h4><a name="TOC-Enable-the-built-in-VNC-server"></a>Enable the built-in VNC server</h4></div><div>Add these lines in the .vmx file:</div><div><br /></div><span style="font-family:courier new,monospace"><span style="font-size:small">RemoteDisplay.vnc.port = "5900" <br />RemoteDisplay.vnc.enabled = "TRUE" <br /># optional password: <br />RemoteDisplay.vnc.password = "password"<br /></span></span><div><br /></div><div>Then simply connect your favorite VNC client to localhost.<br /><h3><a name="TOC-Boot-arguments"></a>Boot arguments</h3>
(please add text)</div><div>
<h3><a name="TOC-Faking-guest-OS-detection"></a>Faking guest OS detection</h3>
We need to fake VMware guest OS detection in order to avoid error message "<i>The guest operating system is not Mac OS X Server</i>" (implicitly to simply boot).</div><div><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/vmware/VMware%20guest%20os%20detection.png?attredirects=0" imageanchor="1"><img border="0" src="http://www.puredarwin.org/_/rsrc/1247429745836/developers/vmware/VMware%20guest%20os%20detection.png" /></a></div></div><div>VMware guest OS detection is trivial, and so the way to avoid it:</div><div>
<br />
<tt><span style="font-family:courier new,monospace"><span style="font-size:small">touch "/Volumes/PureDarwin/System/Library/CoreServices/ServerVersion.plist"</span></span></tt><span style="font-family:courier new,monospace"><span style="font-size:small"><br /></span></span>
<br /><span style="text-decoration:underline">Note:</span> This tweak should/could be deprecated by time.</div><div><br /></div><h2><a name="TOC-Devices"></a>Devices</h2><div>VMware Fusion 2.0.5</div><div><b>Host:</b> Mac OS X 9.7.0</div><div><b>Guest:</b> PureDarwin (9J61)</div><div><br /></div><div>Here's a vendor/device id list retrieved from the VMware guest OS:</div><div><br /></div><div><div><span style="font-family:courier new,monospace;font-size:small">"0x8086","0x7191","Intel Corporation","82443BX/ZX","440BX/ZX AGPset PCI-to-PCI bridge"</span></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x8086","0x7110","Intel Corporation","82371AB/EB/MB","PIIX4/4E/4M ISBridgeA "</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x8086","0x7113","Intel Corporation","82371AB/EB/MB","PIIX4/4E/4M Power Management Controller"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x8086","0x7111","Intel Corporation","82371AB/EB/MB","PIIX4/4E/4M IDE Controller"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x15ad","0x0790","",""</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">[...] &lt;- + x 30</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small"><span style="font-family:Arial,Verdana,sans-serif;font-size:13px"><div>"0x15ad","0x0790","",""</div></span></span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x8086","0x7112","Intel Corporation","82371AB/EB/MB","PIIX4/4E/4M USB Interface"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x8086","0x100F","Intel Corporation","82545EM","Gigabit Ethernet Controller (copper)"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x15AD","0x0770","VMware Inc.","n/a","Standard Enhanced PCI to USB Host Controller"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x1274","0x1371","Ensoniq","ES 1371","AudioPCI"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x1000","0x0030","LSI Logic","LSI53C1020/1030","PCI-X to Ultra320 SCSI Controller"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x15AD","0x0405","VMware Inc.","9500MGS","NVIDIA"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x15AD","0x0740","VMware Inc.","0X0880","VMWare VMCI Bus Device"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">"0x8086","0x7190","Intel Corporation","82443BX/ZX","440BX/ZX AGPset Host Bridge"</span></font></div></div><div>
<h2><a name="TOC-Boot"></a>Boot</h2><h3><a name="TOC-VMware-Fusion-BIOS"></a>VMware Fusion BIOS</h3><div>VMware Fusion comes with a combo PhoenixBIOS/VMware BIOS.</div><div><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/vmware/VMware%20fusion%20bios%20boot.png?attredirects=0" imageanchor="1"><img border="0" height="291" src="http://www.puredarwin.org/_/rsrc/1247951753818/developers/vmware/VMware%20fusion%20bios%20boot.png?height=291&amp;width=420" width="420" /></a></div><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/vmware/VMware%20fusion%20bios.png?attredirects=0" imageanchor="1"><img border="0" height="371" src="http://www.puredarwin.org/_/rsrc/1247951748803/developers/vmware/VMware%20fusion%20bios.png?height=371&amp;width=420" width="420" /></a></div><div style="display:block;text-align:left"><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/vmware/VMware%20fusion%20bios%202.png?attredirects=0" imageanchor="1"><img border="0" height="371" src="http://www.puredarwin.org/_/rsrc/1247951743546/developers/vmware/VMware%20fusion%20bios%202.png?height=371&amp;width=420" width="420" /></a></div><h3><a name="TOC-Bootloader"></a>Bootloader</h3><div style="display:block;text-align:left"><span style="font-family:Lucida Grande,Verdana,sans-serif;font-size:12px">VMware uses darwin.iso (VMware Tools) which contains the DFE bootloader (Stage 2 boot file &lt; 128K) to provide a bootloader.</span></div><h4><a name="TOC-darwin.iso"></a>darwin.iso</h4><div style="display:block;text-align:left"><font face="'Lucida Grande', Verdana, sans-serif" size="3"><span style="font-size:12px"><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small">Located in /Library/Application Support/VMware Fusion/isoimages/original/darwin.iso</span></font></p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace">ISO 9660 CD-ROM filesystem data 'CD' (bootable)</font></span></p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small"><br /></span></font></p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small">pdisk reports:</span></font></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace">Partition map (with 512 byte blocks) on 'original/darwin.iso'</font></span></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace"> #:                type name                  length   base   ( size )</font></span></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace"> 1: Apple_partition_map Apple                     63 @ 1     </font></span></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace"> 2:           Apple_HFS DiscRecording 3.2.0f2   6940 @ 244    (  3.4M)</font></span></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal;min-height:14px"><span style="font-size:small"><font face="'courier new', monospace"><br /></font></span></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace">Device block size=2048, Number of Blocks=3339059200 (6.2T)</font></span></p>
<p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace">DeviceType=0x0, DeviceId=0x0</font></span></p><div><font face="arial, sans-serif"><span style="font-size:small"><br /></span></font></div><div><font face="arial, sans-serif"><span style="font-size:small">The DFE bootloader:</span></font></div><div><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><span style="font-size:small"><font face="'courier new', monospace">-r--r--r--@ 1 201  wheel  63520 Jun 23 00:20 /Volumes/VMware Tools/.hiddendir/boot (dfe’)</font></span></p><div><span style="font-size:small"><font face="'courier new', monospace">In order to compare the siwe, Chameleon takes 295328B and the latest DFE 63648B.</font></span></div></div><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small"><br /></span></font></p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small">Facing the bootloader size limitation:</span></font></p><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/vmware/VMware%20booter%20size%20limitation.png?attredirects=0" imageanchor="1"><font face="arial, sans-serif"><span style="font-size:small"><img border="0" src="http://www.puredarwin.org/_/rsrc/1248034226480/developers/vmware/VMware%20booter%20size%20limitation.png" /></span></font></a></div><font face="arial, sans-serif"><span style="font-size:small"><br /></span></font><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small">It is possible to alter the content of darwin.iso, but the package needs to be signed again.</span></font></p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small"><br /></span></font></p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal"><font face="arial, sans-serif"><span style="font-size:small">hdiutil -readwrite attach darwin.iso</span></font></p><div><div><font face="arial, sans-serif"><span style="font-size:small">h</span></font><font face="arial, sans-serif"><span style="font-size:small">diutil eject..</span></font><div><br /><font face="'courier new', monospace"><span style="font-size:small">openssl genrsa -out tools-priv.pem 2048 <br />openssl rsa -in tools-priv.pem -pubout -out tools-key.pub <br />openssl dgst -sha1 -sign tools-priv.pem &lt; darwin.iso &gt; darwin.iso.sig <br />for A in *.iso ; do openssl dgst -sha1 -sign tools-priv.pem &lt; $A &gt; $A.sig ; done</span></font></div></div></div></span></font></div></div></div>
<h3><a name="TOC-Single-user-mode"></a>Single user mode</h3>
<div>It boots.</div><div>
<div><img height="150" src="http://www.puredarwin.org/_/rsrc/1218489175310/developers/vmware/VMware%20single%20user-mode.png?height=150&amp;width=200" style="border-width:0px" width="200" /></div>
</div>
<h3><a name="TOC-Multi-user-mode"></a>Multi user mode</h3>
<div>It boots but fails because of read-only medium when a connected CD/DVD drive is configured to use a disk image (ISO).</div><div>It works when a VMware disk image (.vmdk) is used since read-write is enabled (and functional) by default.</div><h2><a name="TOC-Network"></a>Network</h2><h3><a name="TOC-Emulated-NICs"></a>Emulated NICs</h3><div><span style="font-weight:bold"><span style="font-weight:normal">VMware seems to provide 3 emulated NIC:</span></span></div><div><ul><li><b>e1000</b></li><li><b>VMware NIC - vmxnet<br /></b>High performance (Gigabit), need VMware drivers in the guest.<br />OK for production.</li><li><b>VLANCE (aka AMD PCNET-32)<br /></b>Lower perf, high CPU load, no kext available, problems solved. Update November 2012: A driver is in the works at <a href="https://code.google.com/p/pcnet32-driver-for-puredarwin/" target="_blank">https://code.google.com/p/pcnet32-driver-for-puredarwin/</a> - <b><font color="#ff0000">information about this driver still needs to be worked into this page</font></b></li></ul><h4><a name="TOC-e1000"></a>e1000</h4></div><div>VMware emulates an Intel e1000 network card.<br />"e1000" is apparently a generic term for a <span style="font-weight:bold">series</span> of similar but different chips.</div><div><a href="http://www.intel.com/design/network/products/lan/controllers/82545.htm" rel="nofollow">http://www.intel.com/design/network/products/lan/controllers/82545.htm</a></div><div><br /></div><div><span style="font-family:courier new,monospace;font-size:x-small"><div><span style="font-family:Arial,Verdana,sans-serif;font-size:16px;font-weight:bold"><font size="3"><span style="font-size:13px;font-weight:normal">From Intel:<br /><br /><font face="'courier new', monospace"><span style="font-size:small">Stepping   Vendor ID   Device ID Description <br /><br />82547EI-A0 8086h       1019h     Copper </span></font></span></font></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-size:16px;font-weight:bold"><font size="3"><span style="font-size:13px;font-weight:normal"><font face="'courier new', monospace"><span style="font-size:small">82547EI-A1 8086h       1019h     Copper <br />82547EI-B0 8086h       1019h     Copper <br />82547EI-B0 8086h       101Ah     Mobile <br />82547GI-B0 8086h       1019h     Copper <br />82546EB-A1 8086h       1010h     Copper; Dual Port MAC Default <br />82546EB-A1 8086h       1012h     Fiber; Dual Port <br />82546EB-A1 8086h       101Dh     Copper; Quad Port <br />82546GB-B0 8086h       1079h     Copper; Dual Port </span></font></span></font></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-size:16px;font-weight:bold"><font size="3"><span style="font-size:13px;font-weight:normal"><font face="'courier new', monospace"><span style="font-size:small">82546GB-B0 8086h       107Ah     Fiber; Dual Port <br />82546GB-B0 8086h       107Bh     SerDes; Dual Port </span></font></span></font></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-size:16px;font-weight:bold"><font size="3"><span style="font-size:13px;font-weight:normal"><b><font face="'courier new', monospace"><span style="font-size:small">82545EM-A  8086h<span style="font-weight:normal">      <span style="font-weight:bold"> 100Fh     Copper </span></span></span></font></b></span></font></span></div><div><span style="font-family:Arial,Verdana,sans-serif;font-size:16px;font-weight:bold"><font size="3"><span style="font-size:13px;font-weight:normal"><font face="'courier new', monospace"><span style="font-size:small">82545EM-A  8086h       1011h     Fiber</span></font></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82545GM-B  8086h       1026h     Copper MAC Default </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82545GM-B  8086h       1027h     Fiber </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82545GM-B  8086h       1028h     SerDes</span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82544EI-A4 8086h       1107h     Copper MAC Default </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82544GC-A4 8086h       1112h     Copper MAC Default </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541EI-A0 8086h       1013h     Cooper MAC Default </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541EI-A0 8086h       1013h     Cooper MAC Default </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541EI-B0 8086h       1013h     Cooper MAC Default </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541EI-B0 8086h       1018h     Mobile</span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541GI-B1 8086h       1076h     Cooper </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541GI-B1 8086h       1077h     Mobile </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541PI-C0 8086h       1076h     Cooper </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82541ER-C0 8086h       1078h     Cooper </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82540EP-A  8086h       1017      Desktop </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82540EP-A  8086h       1016      Mobile </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82540EM-A  8086h       100E      Desktop </span></span></font></span></div><div><span style="font-weight:bold"><font><span style="font-weight:normal"><span style="font-size:small">82540EM-A  8086h       1015      Mobile </span></span></font></span></div></span></div><div><div><div><span style="font-weight:bold"><span style="font-weight:normal"><h3><a name="TOC-Status"></a>Status</h3></span></span></div><div><div>The VMware virtual device chipset seems to correspond to the Intel<span style="font-family:arial,Verdana,sans-serif">82545EM (Copper)</span></div><div><div><ul><li><b>Vendor ID:</b> 0x8086</li><li><b>Primary device ID:</b> 0x100F</li></ul></div><div><br /></div></div></div><div>Mac OS X contains a driver (AppleIntel8254XEthernet) for the chip emulated by VMware which "should match and work".</div><div><b>But</b> this driver is <span style="text-decoration:underline">not available</span> for Darwin yet, neither in source nor binary form.</div><div><br /></div><div>We found also two KEXTs close (but not enough "by nature") to the VMware <span style="font-family:arial,Verdana,sans-serif">82545EM virtual device:</span></div><div><ul><li>AppleIntel8255x (built from the <a href="http://www.puredarwin.org/developers/darwinbuild">Darwinbuild</a> project)</li><li><a href="http://code.google.com/p/82566mm-osx-driver/" style="color:rgb(85,26,139);outline-style:none" target="_blank">82566mm-osx-driver</a> (an OpenSource one)</li></ul></div><div>Both of the two KEXTs personality file (Info.plist) can be modified to match the VMware virtual device in order to be (kext)loaded at boot.</div><div><b><font color="#ff9900">But no interface (e.g., en0) is affected...</font></b></div><div><br /></div><div><div>The <span style="font-family:arial,Verdana,sans-serif">82566MM<span style="font-family:Arial,Verdana,sans-serif"> driver currently only supports<span style="border-collapse:separate;font-family:arial"> chips (e.g., 82566MM) which appear to be slightly different to the 82545EM that VMware apparently emulates.</span></span></span></div></div><h2><a name="TOC-e1000-support-quest"></a>e1000 support quest</h2></div></div><h3><a name="TOC-Notions"></a>Notions</h3><h4><a name="TOC-Driver-and-IOPCIDevice"></a>Driver and IOPCIDevice</h4><div>PCI stands for Peripheral Component Interconnect.</div><div><br /></div><div>A driver for a PCI Ethernet controller inherits from IOEthernetController but uses an instance of IOPCIDevice class (in order to connect to the PCI bus).</div><div>IOPCIDevice is a basic nub class representing any PCI device in any PCI slot.</div><div><br /></div><div><font face="'courier new', monospace"><span style="font-size:small">Ethernet driver &lt;-&gt; IOPCIDevice &lt;-&gt; IOPCIBridge &lt;-&gt; IOPlatformDevice &lt;-&gt; ...</span></font></div><h4><a name="TOC-PCI-matching-summarization"></a>PCI matching summarization</h4><div><ul><li>A driver can control a device on a PCI bus.</li><li>A driver announces this fact by including a "<i>personality</i>" in its plist file.</li><li>This personality includes IOProviderClass=IOPCIDevice (Key=Value).</li><li>IOPCIDevice defines 2 sets of keys that a driver can use for matching:</li><ul><li>a key based on standard PCI registers</li><li>a key based on Open Firmware (probably related to PPC only)</li></ul><li>A PCI device driver can use one type of key or both of them (if personalities are disjoint)</li></ul></div><h3><a name="TOC-Vendor-and-Device-IDs"></a>Vendor and Device IDs</h3><div><h4><a name="TOC-Vendor-ID-intel-def.-"></a>Vendor ID (intel def.)</h4><div><div><span style="font-family:arial,sans-serif;font-size:small">This uniquely identifies all Intel PCI products.<br />This field may be auto-loaded from the EEPROM at power on or upon the assertion of PCI_RST#.<br />A value of 0x8086 is the default for this field upon power up if the EEPROM does not respond or is not programmed. </span><br /><span style="font-family:arial,sans-serif;font-size:small;font-weight:bold"><h4><a name="TOC-Device-ID-Intel-def.-"></a>Device ID (Intel def.)</h4><span style="font-weight:normal">This uniquely identifies the Ethernet controller.<br />This field may be autoloaded from the EEPROM at power on or upon the assertion of RST#.<br />The default value for this field is used upon power up if the EEPROM does not respond or is not programmed.</span></span><br /><div><font face="arial, sans-serif"><span style="font-size:small"><span style="font-family:Arial,Verdana,sans-serif;font-size:13px"><h4><a name="TOC-PCI-configuration-space-registers-"></a>PCI configuration space registers </h4></span></span></font></div></div></div><ul><li>vendor and device ID (offsets 0x00 and 0x002)</li><li>subsystem vendor and device ID (offsets 0x2C and 0x2E)</li><li>class code (offset 0x09)</li><li><span style="color:rgb(153,153,153)">revision ID (not available in property matching)</span></li><li><span style="color:rgb(153,153,153)">header type (not available in property matching)</span></li></ul></div><div><h4><a name="TOC-PCI-matching-dictionary"></a>PCI matching dictionary</h4>Value for a key can be a single register value or a list (space separator).<br />Register values are little-endian hexa strings (device ID first then vendor ID).<br />A mask can be included (only a part of the value is compared), bits set to 0 are ignored by the mask <br /><ul><li>IOPCIMatch<br />matches against primary vendor/device ID registers (checked first)<br />or<br />matches aganst the subsystem vendor/device ID</li><li>IOPCIPrimaryMatch<br />matches against primary vendor/device ID registers</li><li>IOPCISecondaryMatch<br />matches against the subsystem vendor/device ID registers</li><li>IOPCIClassMatch<br />matches against the class code register</li></ul></div><div>Examples of corresponding key/value based on vendor and device id which can be expected in <i>Info.plist</i>:</div><div><br /></div><div>Vendor ID: 0x8086</div><div>Primary device ID: 0x100F</div><div><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOPCIMatch&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(159,197,232)">0x100F8086</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span><br /></div><div><br /></div><div><div>Vendor ID: 0x8086</div><div>Primary device ID: 0x1000 or 0x100F</div></div><div><div><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOPCIMatch&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(159,197,232)">0x10008086 0x100F8086&lt;/string&gt;</span></span></div><div><font face="'courier new', monospace"><span style="font-size:small"><br /></span></font></div></div><div><div><div>Vendor ID: 0x8086</div><div>Primary device ID: 0x1000..0x10FF (first two digits subsystem IDs are not checked)</div></div></div><div><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOPCIPrimaryMatch&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(159,197,232)">0x10008086&amp;amp;0xFF00FFFF</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span><br /></div><div><br /></div><div>Class code for ethernet controller (0x0200 (in fact 4bytes, last byte ignored))</div><div><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOPCIClassMatch&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(180,167,214)">0x02000000&amp;amp;0xffff0000</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span></div><div><font face="arial, sans-serif"><span style="font-size:small"><br /></span></font></div><div><font face="arial, sans-serif"><span style="font-size:small">Consequently, the <span style="font-family:Arial,Verdana,sans-serif;font-size:13px">PCI ID associated to the 82545EM chipset should be "</span><font face="'courier new', monospace">100F:8086</font><span style="font-family:Arial,Verdana,sans-serif;font-size:13px">"</span></span></font></div><div>Which is confirmed on</div><div><ul><li><b>FreeBSD:</b> <span style="font-style:italic"><span style="font-size:small"><font face="arial, sans-serif">100F8086</font></span><font face="arial, sans-serif"> -&gt; 82545EM</font> Gigabit ethernet controller Coper</span></li><li><b>GNU/Linux:</b> <span style="font-size:x-small"><span style="font-size:small"><i><font face="arial, sans-serif">pci 8086:100F kmod-e1000 </font></i></span><font size="3"><span style="font-size:13px"><i><font face="arial, sans-serif">corresponds to e1000.ko</font></i></span></font></span></li><li><b>Intel:</b> From the "<i>Intel PCI/PCI-X Family of Gigabit Ethernet Controllers Software Developer’s Manual</i>", <br />A list of pair model / device id is available in the Intel spec, which confirm the result above ( "IOModel" = "82545EM Copper" )</li><li><b>e1000 from sourceforge:</b> <i>82540EP/EM, 82541xx, 82544GC/EI, 82545GM/EM, 82546GB/EB, and 82547xx</i><br /><a href="http://kent.dl.sourceforge.net/sourceforge/e1000/OpenSDM_8254x-37.pdf" rel="nofollow" target="_blank">http://kent.dl.sourceforge.net/sourceforge/e1000/OpenSDM_8254x-37.pdf</a></li><li><a href="http://www.pcidatabase.com/vendor_details.php?id=1302" rel="nofollow">http://www.pcidatabase.com/vendor_details.php?id=1302</a> also.</li></ul></div><div><font face="'courier new', monospace"><span style="font-size:small"><span style="font-size:x-small"><font face="Arial, Verdana, sans-serif" size="3"><span style="font-size:13px"><span style="text-decoration:underline">Note:</span> "When running VMware ESX Server 3.0.0, you can experience a kernel panic if you use Intel e1000 network adapters with any of the following PCI IDs: </span></font><font face="Arial, Verdana, sans-serif" size="3"><span style="font-size:13px"><b>0x100F</b>[...]" - <a href="http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=2221" rel="nofollow" target="_blank">http://kb.vmware.com/selfservice/microsites/search.do?language=en_US&amp;cmd=displayKC&amp;externalId=2221</a></span></font></span></span></font></div><div><h3><a name="TOC-Real-KEXTs"></a>Real KEXTs</h3><font face="'courier new', monospace"><span style="font-size:small"><span style="font-size:x-small"><font face="Arial, Verdana, sans-serif" size="3"><span style="font-size:13px"><h4><a name="TOC-w-o-KEXT"></a>w/o KEXT</h4></span></font></span></span></font></div></div><div><div>Example without any network kext loaded (according to kextstat and grep):</div><div>Quickly finding the node into ioreg:</div><div>class is IOPCIDevice</div><div>even the IOName and name are the only "ethernet" occurence found</div><div>0x0200 is the class code for ethernet</div><div>0x8086 is the vendor id</div><div><br /></div><div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   +-o S2F0@1  &lt;class <span style="background-color:rgb(255,255,0)">IOPCIDevice</span>, registered, matched, active, busy 0, retain 6&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |   {</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IOPCIResourced" = Yes</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IOInterruptControllers" = ("io-apic-0")</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IOName" = "<span style="background-color:rgb(255,255,0)">ethernet</span>"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "subsystem-id" = &lt;50070000&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IODeviceMemory" = (({"address"=18446744073048031232,"length"=131072}),({"address"=18446744073047900160,"le$</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "class-code" = &lt;<span style="background-color:rgb(255,255,0)">00000200</span>&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IOPowerManagement" = {"CurrentPowerState"=2}</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "revision-id" = &lt;01000000&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IOInterruptSpecifiers" = (&lt;1300000007000000&gt;)</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "assigned-addresses" = &lt;1008028200000000000092d800000000000002001808028200000000000090d80000000000000100200$</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "IOChildIndex" = 2</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "built-in" = &lt;00&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "acpi-device" = "IOACPIPlatformDevice is not serializable"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "device-id" = &lt;0f100000&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "vendor-id" = &lt;<span style="background-color:rgb(255,255,0)">86800000</span>&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "acpi-path" = "IOACPIPlane:/_SB/PCI0@0/P2P0@110000/S2F0@10000"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "subsystem-vendor-id" = &lt;ad150000&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "name" = "<span style="background-color:rgb(255,255,0)">ethernet</span>"</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "reg" = &lt;00080200000000000000000000000000000000001008020200000000000000000000000000000200180802020000000000$</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |     "compatible" = &lt;"pci15ad,750","pci8086,100f","pciclass,020000"&gt;</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">    | |   |   |   }</span></font></div><div><br /></div></div><h4><a name="TOC-AppleIntel8255x"></a>AppleIntel8255x</h4><div><div style="display:block">Intel82566MM.kext can be build and loaded.</div><div><div style="display:block">Info.plist needs to be modified to match VMware device.</div><div style="display:block">No interface is shown..</div><div style="display:block"><br /></div><div style="display:block"><br /></div><div style="display:block">With 0x8086 0x100F:</div><div style="display:block"><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 14 20:56:15 PureDarwin kernel[0]: i82557eeprom: checksum fffe incorrect</span></font></div><div><div><font face="'courier new', monospace"><span style="font-size:small">Jul 14 20:56:15 PureDarwin kernel[0]: Intel82557: couldn't allocate eeprom object</span></font></div><div><br /></div></div></div></div></div><div><h4><a name="TOC-Intel82566MM"></a>Intel82566MM</h4><div><div style="display:block">Intel82566MM.kext can be build and loaded.</div><div style="display:block">Info.plist needs to be modified to match VMware device.</div><div style="display:block">No interface is shown..</div><div style="display:block"><br /></div><div style="display:block"><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 12 19:17:19 PureDarwin kernel[0]: venderid: 0x8086 deviceid: 0x100f.</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small"><br /></span></font></div>It seems really clear that this kext has been derivated from the FreeBSD branch too (even comments are almost identic).</div><div style="display:block">Editing the plist is naturally not enough, so after adding a couple of defines and enable debug on stdout, it looks like:</div><div style="display:block"><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:44 PureDarwin kernel[0]: Intel82566MM debug: bool Intel82566MM::Init(OSDictionary *properties).</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:44 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::start(IOService * provider)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:44 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::createWorkLoop().</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::getWorkLoop() const.</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::createOutputQueue().</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::getWorkLoop() const.</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::getPacketBufferConstraints.</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: venderid: 0x8086 deviceid: 0x100f.</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: Intel82566MM::e1000_read_pcie_cap_reg(struct e1000_hw *hw, UInt32 reg, UInt16 *value)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: <font color="#ff0000">flashPCIAddress.</font></span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:small">Jul 15 00:38:45 PureDarwin kernel[0]: Intel82566MM debug: void Intel82566MM::free()</span></font></div><div><br /></div><div>The <font color="#ff0000">red</font> part can be found in <i>Intel82566M.cpp</i> and corresponds to:</div><div><div><span style="white-space:pre"><font face="'courier new', monospace"><span style="font-size:small"> </span></font></span><font face="'courier new', monospace"><span style="font-size:small"><b>flashPCIAddress = pciDevice-&gt;mapDeviceMemoryWithRegister(kIOPCIConfigBaseAddress1); <font face="arial, sans-serif"><span style="font-weight:normal">&lt;- This function failed! why?</span></font></b></span></font></div><div><span style="white-space:pre"><font face="'courier new', monospace"><span style="font-size:small"> </span></font></span><font face="'courier new', monospace"><span style="font-size:small">if (flashPCIAddress == NULL) {</span></font></div><div><span style="white-space:pre"><font face="'courier new', monospace"><span style="font-size:small"> </span></font></span><font face="'courier new', monospace"><span style="font-size:small"><font color="#ff0000">e_debug("flashPCIAddress.\n");</font></span></font></div><div><span style="white-space:pre"><font face="'courier new', monospace"><span style="font-size:small"> </span></font></span><font face="'courier new', monospace"><span style="font-size:small">goto <font color="#ff9900">FAILED_OPENED</font>;</span></font></div><div><span style="white-space:pre"><font face="'courier new', monospace"><span style="font-size:small"> </span></font></span><font face="'courier new', monospace"><span style="font-size:small">}</span></font></div><div><br /></div></div><div>Which irremediably leads to</div><div><div><font face="'courier new', monospace"><span style="font-size:small"><font color="#ff9900">FAILED_OPENED:</font></span></font></div><div><span style="white-space:pre"><font face="'courier new', monospace"><span style="font-size:small"> </span></font></span><font face="'courier new', monospace"><span style="font-size:small">pciDevice-&gt;close(this);</span></font></div><div>At "free()", it's already too late anyway..</div><div><br /></div><div>After altering a bit the code, we can go further.. but not so far.</div><div><div style="display:block;text-align:left"><a href="http://www.puredarwin.org/developers/vmware/8266MM%20debug%20I.png?attredirects=0" imageanchor="1"><img border="0" height="366" src="http://www.puredarwin.org/_/rsrc/1247615901391/developers/vmware/8266MM%20debug%20I.png?height=366&amp;width=420" width="420" /></a></div><div style="display:block;text-align:left">In the FreeBSD src code:</div><div style="display:block;text-align:left"><div style="display:block;text-align:left"><br /></div><div style="display:block;text-align:left">/**</div><div style="display:block;text-align:left"> *  e1000_read_mac_addr_82540 - Read device MAC address</div><div style="display:block;text-align:left"> *  @hw: pointer to the HW structure</div><div style="display:block;text-align:left"> *</div><div style="display:block;text-align:left"> *  Reads the device MAC address from the EEPROM and stores the value.</div><div style="display:block;text-align:left"> *  Since devices with two ports use the same EEPROM, we increment the</div><div style="display:block;text-align:left"> *  last bit in the MAC address for the second port.</div><div style="display:block;text-align:left"> *</div><div style="display:block;text-align:left"> *  This version is being used over generic because of customer issues</div><div style="display:block;text-align:left"> *  with VmWare and Virtual Box when using generic. It seems in</div><div style="display:block;text-align:left"> *  the emulated 82545, RAR[0] does NOT have a valid address after a</div><div style="display:block;text-align:left"> *  reset, this older method works and using this breaks nothing for</div><div style="display:block;text-align:left"> *  these legacy adapters.</div><div style="display:block;text-align:left"> **/</div><div><br /></div></div><br /></div><div><br /></div></div><div><b>kextload:</b></div></div><div style="display:block"><br /></div><div style="display:block"><a href="http://www.puredarwin.org/developers/vmware/82566MM.png?attredirects=0" imageanchor="1" style="padding:7px;color:rgb(78,125,191);outline-style:none;border-bottom-style:none"><img border="0" src="http://www.puredarwin.org/_/rsrc/1234903619594/developers/vmware/82566MM.png" style="border-width:0px" /></a></div><div style="display:block"><br /></div><div style="display:block"><b>kextload more verbose:</b></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">[...]</span></font></div><div style="display:block"><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: module /System/Library/Extensions/IONetworkingFamily.kext/Contents/MacOS/IONetworkingFamily (identifier com.apple.iokit.IONetworkingFamily) is already loaded</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/System.kext/PlugIns/IOKit.kext/IOKit</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/System.kext/PlugIns/Unsupported.kext/Unsupported</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/System.kext/PlugIns/Libkern.kext/Libkern</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/System.kext/PlugIns/Mach.kext/Mach</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/System.kext/PlugIns/BSDKernel.kext/BSDKernel</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/IOPCIFamily.kext/IOPCIFamily</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: using existing load address 0xd19a000 (0xd19ac40 with header pad)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod name: com.apple.iokit.IOPCIFamily</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod start @ 0xd1a6333 (offset 0xb6f3)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod stop @ 0xd1a6376 (offset 0xb736)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/IONetworkingFamily.kext/Contents/MacOS/IONetworkingFamily</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: using existing load address 0xf888000 (0xf888c40 with header pad)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod name: com.apple.iokit.IONetworkingFamily</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod start @ 0xf8983e0 (offset 0xf7a0)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod stop @ 0xf898423 (offset 0xf7e3)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: link/loading file /System/Library/Extensions/IONetworkingFamily.kext/Contents/PlugIns/Intel82566MM.kext/Contents/MacOS/Intel82566MM</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: allocated 53248 bytes in kernel space at 0xff7d000</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: using load address of 0xff7d000</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod name: com.tootoosoft.driver.Intel82566MM</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod start @ 0xff802cd (offset 0x268d)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: kmod stop @ 0xff80310 (offset 0x26d0)</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: module com.tootoosoft.driver.Intel82566MM created as # 64 at address 0xff7d000, size 53248</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: module # 64 reference counts incremented</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: module # 64 started</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: /System/Library/Extensions/IONetworkingFamily.kext/Contents/PlugIns/Intel82566MM.kext loaded successfully</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: loading personalities for extension /System/Library/Extensions/IONetworkingFamily.kext/Contents/PlugIns/Intel82566MM.kext and dependencies</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: sending personalities to kernel:</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:     from extension /System/Library/Extensions/IONetworkingFamily.kext:</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:         IONetworkStack</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:         Kernel Debugging Driver</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:     from extension /System/Library/Extensions/IOPCIFamily.kext:</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:         IOPCI2PCIBridge-Name</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:         IOPCI2PCIBridge-i386</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:         IOPCI2PCIBridge-PCI</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:     from extension /System/Library/Extensions/IONetworkingFamily.kext/Contents/PlugIns/Intel82566MM.kext:</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload:         Intel82566MM</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: sending 6 personalities to the kernel</span></font></div><div style="display:block"><font face="'courier new', monospace"><span style="font-size:x-small">kextload: matching started for /System/Library/Extensions/IONetworkingFamily.kext/Contents/PlugIns/Intel82566MM.kext</span></font></div><div><br /></div></div></div></div><h4><a name="TOC-AppleIntel8254XEthernet"></a>AppleIntel8254XEthernet</h4><div>Cannot be built (no source).</div><div>Cannot be redistributed as binary form.</div><div>Load, match and work (interface en0 is affected, network is functional).</div><div><br /></div><div><div><font face="'courier new', monospace"><span style="font-size:small">1017-Jul 12 19:25:51 PureDarwin kernel[0]: Ethernet [Intel8254X]: Link down on en0 called by disable() -- </span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">1018-Jul 12 19:25:51 PureDarwin kernel[0]: Can't unload com.apple.driver.AppleIntel8254XEthernet due to -</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">1019:Jul 12 19:26:28 PureDarwin kernel[0]: venderid: 0x8086 deviceid: 0x100f.</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">1020-Jul 12 19:26:28 PureDarwin kernel[0]: AppleIntel8254XEthernet: Ethernet address 00:0c:29:69:17:26</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">1021-Jul 12 19:26:28 PureDarwin kernel[0]: Ethernet [Intel8254x]: Link up on en0, 1-Gigabit, Full-duplex, No flow-control, Debug [796d,ac08,0de1,0200,41e1,7c00]</span></font></div><div><font face="'courier new', monospace"><span style="font-size:small">1022-Jul 12 19:26:29 PureDarwin mDNSResponder[24]: Note: Frequent transitions for interface en0 (FE80:0000:0000:0000:020C:29FF:FE69:1726); network traffic reduction measures in effect</span></font></div><div><br /></div></div><div>This KEXTs seems to support all these chips:</div><div><div><font face="'courier new', monospace"><span style="font-size:x-small">82540EM</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82540EM LOM</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82540EP</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82540EP LOM</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82540EP LP</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82543GC Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82543GC Fiber</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82544EI Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82544EI Fiber</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82544GC Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82544GC LOM</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82545EM Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82545EM Fiber</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82545GM Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82545GM Fiber</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82545GM SERDES</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82546EB Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82546EB Fiber</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82546GB Copper</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82546GB Fiber</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82546GB SERDES</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82541EI</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82541EI Mobile</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82541ER</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82541GI</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82541GI Mobile</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82547EI</span></font></div><div><font face="'courier new', monospace"><span style="font-size:x-small">82547GI</span></font></div><div><br /></div></div><div>Values found (non exhaustive) interesting have been highlighted.</div><div><br /></div><div><div><font face="'courier new', monospace"><span style="font-size:x-small"><div>    | |   |   +-o S2F0@1  &lt;class IOPCIDevice, registered, matched, active, busy 0, retain 9&gt;</div><div>    | |   |   | | {</div><div>    | |   |   | |   "IOPCIResourced" = Yes</div><div>    | |   |   | |   "IOInterruptControllers" = ("io-apic-0")</div><div>    | |   |   | |   "IOName" = "ethernet"</div><div>    | |   |   | |   "subsystem-id" = &lt;50070000&gt;</div><div>    | |   |   | |   "IODeviceMemory" = (({"address"=18446744073048031232,"length"=131072}),({"address"=18446744073047900160,"le$</div><div>    | |   |   | |   "IOPMPCIConfigSpaceVolatile" = No</div><div>    | |   |   | |   "class-code" = &lt;00000200&gt;</div><div>    | |   |   | |   "EEPROM Version" = "0.0"</div><div>    | |   |   | |   "IOPowerManagement" = {"ChildrenPowerState"=2,"CurrentPowerState"=2}</div><div>    | |   |   | |   "revision-id" = &lt;01000000&gt;</div><div>    | |   |   | |   "IOInterruptSpecifiers" = (&lt;1300000007000000&gt;)</div><div>    | |   |   | |   "assigned-addresses" = &lt;1008028200000000000092d800000000000002001808028200000000000090d80000000000000100200$</div><div>    | |   |   | |   "IOChildIndex" = 2</div><div>    | |   |   | |   "built-in" = &lt;00&gt;</div><div>    | |   |   | |   "acpi-device" = "IOACPIPlatformDevice is not serializable"</div><div>    | |   |   | |  <span style="background-color:rgb(255,255,0)"> "</span><span style="background-color:rgb(255,255,0)">device-id" = &lt;0f100000&gt; </span></div><div>    | |   |   | |  <span style="background-color:rgb(255,255,0)"> "vendor-id" = &lt;86800000&gt; </span></div><div>    | |   |   | |   "acpi-path" = "IOACPIPlane:/_SB/PCI0@0/P2P0@110000/S2F0@10000"</div><div>    | |   |   | |   "subsystem-vendor-id" = &lt;ad150000&gt;</div><div>    | |   |   | |   "name" = "ethernet"</div><div>    | |   |   | |   "EEPROM Checksum Valid" = Yes</div><div>    | |   |   | |   "reg" = &lt;00080200000000000000000000000000000000001008020200000000000000000000000000000200180802020000000000$</div><div>    | |   |   | |   "compatible" = &lt;"pci15ad,750","pci8086,100f","pciclass,020000"&gt;</div><div>    | |   |   | | }</div><div>    | |   |   | | </div><div>    | |   |   | +-o AppleIntel8254XEthernet  &lt;class AppleIntel8254XEthernet, !registered, !matched, active, busy 0, retain 6&gt;</div><div>    | |   |   |   | {</div><div>    | |   |   |   |   "IOProbeScore" = 10000</div><div>    | |   |   |   |   "Driver Parameters" = {"TxQueueSize"=4096,"RxAbsoluteTimer1000"=64,"Offload TCP/IP Checksum"=Yes,"EnableL$</div><div>    | |   |   |   |  <span style="background-color:rgb(234,153,153)"> "CFBundleIdentifier" = "com.apple.driver.AppleIntel8254XEthernet" </span></div><div>    | |   |   |   |  <span style="background-color:rgb(182,215,168)"> "IODefaultMedium" = "00000020" </span></div><div>    | |   |   |   |   "IOSelectedMedium" = "00000020"</div><div>    | |   |   |   |   "IOMatchCategory" = "IODefaultMatchCategory"</div><div>    | |   |   |   |   "IOLinkSpeed" = 1000000000</div><div>    | |   |   |   |   "IOPowerManagement" = {"CurrentPowerState"=1}</div><div>    | |   |   |   |   "IOVendor" = "Intel"</div><div>    | |   |   |   |   "IOPacketFilters" = {"IONetworkFilterGroup"=275,"IOEthernetWakeOnLANFilterGroup"=0}</div><div>    | |   |   |   |   "IOMACAddress" = &lt;000c29691726&gt;</div><div>    | |   |   |   |  <span style="background-color:rgb(162,196,201)"> "IOProviderClass" = "IOPCIDevice" </span></div><div>    | |   |   |   |   "IOFeatures" = 10</div><div>    | |   |   |   |  <span style="background-color:rgb(180,167,214)"> "IOPCIClassMatch" = "0x02000000&amp;0xffff0000" </span></div><div>    | |   |   |   |   "IOLinkStatus" = 3</div><div>    | |   |   |   |   "IOMaxPacketSize" = 9018</div><div>    | |   |   |   |   "IOMinPacketSize" = 64</div><div>    | |   |   |   |   "IOMediumDictionary" = {"00500023"={"Type"=5242915,"Index"=6,"Flags"=0,"Speed"=10000000},"00100026"={"Typ$</div><div>    | |   |   |   |  <span style="background-color:rgb(159,197,232)"> "IOPCIPrimaryMatch" = "0x10008086&amp;0x0000ffff" </span></div><div>    | |   |   |   |  <span style="background-color:rgb(255,255,0)"> "IOModel" = "82545EM Copper" </span></div><div>    | |   |   |   |  <span style="background-color:rgb(213,166,189)"> "IOClass" = "AppleIntel8254XEthernet" </span></div><div>    | |   |   |   |   "IOActiveMedium" = "00100030"</div><div>    | |   |   |   |   "EN Number" = 0</div><div>    | |   |   |   | }</div><div>    | |   |   |   | </div><div>    | |   |   |   +-o IOEthernetInterface  &lt;class IOEthernetInterface, registered, matched, active, busy 0, retain 10&gt;</div><div>    | |   |   |     | {</div><div>    | |   |   |     |   "IOMediaAddressLength" = 6</div><div>    | |   |   |     |   "IOPrimaryInterface" = Yes</div><div>    | |   |   |     |   "IOInterfaceType" = 6</div><div>    | |   |   |     |   "IORequiredPacketFilters" = {"IONetworkFilterGroup"=19,"IOEthernetWakeOnLANFilterGroup"=0}</div><div>    | |   |   |     |   "IOInterfaceFlags" = 34915</div><div>    | |   |   |     |   "IOInterfaceExtraFlags" = 1073744192</div><div>    | |   |   |     |   "IOInterfaceUnit" = 0</div><div>    | |   |   |     |   "IONetworkData" = {"IOEthernetStatsKey"={"Size"=216,"Data"=&lt;0000000000000000000000000000000000000000000$</div><div>    | |   |   |     |   "BSD Name" = "en0"</div><div>    | |   |   |     |   "IOLocation" = ""</div><div>    | |   |   |     |   "IOMaxTransferUnit" = 1500</div><div>    | |   |   |     |   "IOInterfaceNamePrefix" = "en"</div><div>    | |   |   |     |   "IOBuiltin" = Yes</div><div>    | |   |   |     |   "IOActivePacketFilters" = {"IONetworkFilterGroup"=19,"IOEthernetWakeOnLANFilterGroup"=0}</div><div>    | |   |   |     |   "IOMulticastAddressList" = &lt;01005e0000fb01005e0000013333000000fb33333e2cf1a83333000000013333ff691726&gt;</div><div>    | |   |   |     |   "IOInterfaceState" = 3</div><div>    | |   |   |     |   "IOMediaHeaderLength" = 14</div><div>    | |   |   |     |   "IOControllerEnabled" = Yes</div><div>    | |   |   |     | }</div><div>    | |   |   |     | </div><div>    | |   |   |     +-o IONetworkStack  &lt;class IONetworkStack, registered, matched, active, busy 0, retain 7&gt;</div><div>    | |   |   |       | {</div><div>    | |   |   |       |   "IOProviderClass" = "IOResources"</div><div>    | |   |   |       |   "IOMatchCategory" = "IONetworkStack"</div><div>    | |   |   |       |   "IOProbeScore" = 0</div><div>    | |   |   |       |   "IOClass" = "IONetworkStack"</div><div>    | |   |   |       |   "CFBundleIdentifier" = "com.apple.iokit.IONetworkingFamily"</div><div>    | |   |   |       |   "IOResourceMatch" = "IOBSD"</div><div>    | |   |   |       | }</div><div>    | |   |   |       | </div><div>    | |   |   |       +-o IONetworkStackUserClient  &lt;class IONetworkStackUserClient, !registered, !matched, active, busy 0, ret$</div><div>    | |   |   |           {</div><div>    | |   |   |           }</div><div><br /></div><div><br /></div></span></font></div></div><div><div>A // with its Info.plist (.. file) can be established:</div><br /><font face="'courier new', monospace"><span style="font-size:small"><font face="Arial, Verdana, sans-serif" size="3"><span style="font-size:13px"><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal">[...]</p><p style="margin:0px;font-family:Helvetica;font-style:normal;font-variant:normal;font-weight:normal;font-size:12px;line-height:normal;font-size-adjust:none;font-stretch:normal">&lt;dict&gt;</p></span></font></span></font></div></div></div><blockquote style="border:medium none;margin:0pt 0pt 0pt 40px;padding:0px"><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;CFBundleIdentifier&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small">&lt;string&gt;<span style="background-color:rgb(234,153,153)">com.apple.driver.AppleIntel8254XEthernet</span>&lt;/string&gt;</span><blockquote style="border:medium none;margin:0pt 0pt 0pt 40px;padding:0px"><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOClass&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(213,166,189)">AppleIntel8254XEthernet</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span><br /><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IODefaultMedium&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(182,215,168)">00000020</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span><br /><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOPCIClassMatch&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(180,167,214)">0x02000000&amp;amp;0xffff0000</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span><br /><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOPCIPrimaryMatch&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(159,197,232)">0x10008086&amp;amp;0x0000ffff</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span><br /><span style="font-family:courier new,monospace;font-size:small">&lt;key&gt;IOProviderClass&lt;/key&gt;</span><br /><span style="font-family:courier new,monospace;font-size:small"><span style="background-color:rgb(255,255,255)">&lt;string&gt;</span><span style="background-color:rgb(162,196,201)">IOPCIDevice</span><span style="background-color:rgb(255,255,255)">&lt;/string&gt;</span></span></blockquote></blockquote><blockquote style="border:medium none;margin:0pt 0pt 0pt 40px;padding:0px"><br /></blockquote><div><span style="font-family:courier new,monospace;font-size:x-small"><div><font face="Arial, Verdana, sans-serif" size="3"><span style="font-size:13px"><div><h3><a name="TOC-a-KEXT-pseudo-life"></a>a KEXT pseudo-life</h3><div>The driver inspects and configure the PCI Device</div><div><ol><li style="list-style-type:decimal">driver examines the values in the PCI configuration space registers (e.g., revision ID register)</li><li style="list-style-type:decimal">driver sets some value of them (e.g., enable memory write)</li><li style="list-style-type:decimal">driver interacts with its device</li></ol></div><div><br /></div>(random notes: ipconfig set en0 NONE before kextunload &lt;- not tested)</div><div><br /></div><div><br /></div><div><br /></div><div><br /></div><div>Pseudo-pre-deduction: If the kext is loaded but no interface, could it be?:</div><div><span style="font-family:Lucida Grande,Geneva,Helvetica,Arial,sans-serif;font-size:12px"><dl><dt style="clear:both;margin-top:0px"><code style="font-size:11px;font-family:Monaco,Courier,Consolas,monospace">start</code></dt><dd style="margin-left:15px;margin-top:1px;margin-bottom:6px"><p style="margin-bottom:6px">The <code style="font-size:11px;font-family:Monaco,Courier,Consolas,monospace">start</code> function should initialize the device to a working state. It also needs to create a network object and make it visible to the networking stack as an interface</p><p style="margin-bottom:6px"><br /></p><p style="margin-bottom:6px"><br /></p></dd></dl></span></div><div>network driver's <font face="'courier new', monospace"><span style="font-size:small">start</span></font> function:</div><div><ul><li>set network interface object</li><li>a work loop</li><li>an output queue</li><li>specific resources</li><li>(also retains its provider nub (IOPCIDevice?))</li></ul><br /></div><div>In order to open the Provider nub, the driver should:</div><div><ol><li style="list-style-type:decimal">verify that it is of the appropriate class</li><li style="list-style-type:decimal">retain a reference to it</li><li style="list-style-type:decimal">open it in order to access its services</li></ol></div><div><br /></div><div><div><br /></div></div></span></font></div><div><span style="font-family:Arial,Verdana,sans-serif;font-size:16px;font-weight:bold"><font size="3"><span style="font-size:13px;font-weight:normal"><h3><a name="TOC-Host-NIC"></a>Host NIC</h3></span></font></span></div></span><div><div><div>Restarts all the vmnet services on the <span style="font-weight:bold">host side</span>:</div><div><br /></div><div><span style="font-family:courier new,monospace"><span style="font-size:small">/Library/Application\ Support/VMware\ Fusion/boot.sh --restart</span></span></div>
<div>
<h2><a name="TOC-Troubleshooting"></a>Troubleshooting</h2>
<h3><a name="TOC-On-read-only-medium"></a>On read-only medium</h3></div><div>The tty is flooded with log telling attempt to write on a read-only medium (ie: auth mechanism too) does not work.</div>
<div><span style="font-weight:bold"><span style="color:rgb(255,0,0)">Shadow read-Write support is needed</span>.</span> Another obvious implicit goal is to install PureDarwin with PureDarwin.</div><div><span style="font-weight:bold">FIXME: <span style="font-weight:normal">It will probably use <span style="font-style:italic">/usr/libexec/vndevice</span> with a shadow file and some node in <span style="font-style:italic">/dev/vn*</span>.</span></span></div><h3><a name="TOC-Random-log"></a>Random log</h3>
<div>
<div><span style="font-family:courier new,monospace"><span style="font-size:small">Aug 28 18:58:15.129: vmx| Licensecheck: Invalid license file.</span></span></div>
<div><span style="font-family:courier new,monospace"><span style="font-size:small">Aug 28 18:58:15.131: vmx| Host: SRAT tables not found in memory</span></span></div>
<div><span style="font-family:courier new,monospace"><span style="font-size:small"><br /></span></span>
</div>
<div>
<div><span style="font-family:courier new,monospace"><span style="font-size:small">Aug 28 18:58:15.480: vmx| Topology discovery error: /Library/Preferences/com.apple.windowserver.plist doesn't contain expected key.</span></span></div>
<div><span style="font-family:courier new,monospace"><span style="font-size:small"><br /></span></span>
</div>
<div>
<div><span style="font-family:courier new,monospace"><span style="font-size:small">Aug 28 18:58:15.742: vmx| DISK: Disabling unbuffered I/O on ide0:0 to work around Apple bugs 5679432 and 6048690.</span></span></div><div><span style="font-family:courier new,monospace"><span style="font-size:small"><br /></span></span></div><div><div><span style="font-family:courier new,monospace"><span style="font-size:small">Sep 27 11:52:13.472: vmx| PTSC: failed to read the TSCs.</span></span></div><div><span style="font-family:courier new,monospace"><span style="font-size:small"><br /></span></span></div></div><div><div><span style="font-family:courier new,monospace"><span style="font-size:small">Sep 27 11:52:17.727: vmx| Error: Encountered Apple bug #5202831.  Disconnecting.</span></span></div><div><span style="font-family:courier new,monospace"><span style="font-size:small"><br /></span></span></div><div><div><span style="font-family:courier new,monospace"><span style="font-size:small">Sep 27 11:52:36.086: vcpu-0| CDROM ide1:0: CMD 0xad (*UNKNOWN (0xad)*) FAILED (key 0x5 asc 0x24 ascq 0)</span></span></div></div></div>
</div>
</div>
<h2><a name="TOC-Resources"></a>Resources</h2></div><div>ftp://download.intel.com/design/network/specupdt/82545em.pdf</div><div>http://www.intel.com/design/network/products/lan/docs/82545.htm</div><div>http://download.intel.com/design/network/manuals/8254x_GBe_SDM.pdf</div><div><br /></div><div>http://downloadcenter.intel.com/Detail_Desc.aspx?agr=Y&amp;ProductID=990&amp;DwnldID=3294&amp;strOSs=52&amp;OSFullName=FreeBSD*&amp;lang=eng</div><div><span style="font-family:Arial,sans-serif;font-size:small;color:rgb(85,85,85)">FreeBSD* 4.7 to 4.10 driver for all Intel® PRO/1000 gigabit Ethernet adapters. Valid for the 82540, 82542, 82543, 82544, <b>82545</b>, 82546 and 82547 controllers. <br /></span></div><div><br /></div><div>http://developer.apple.com/documentation/DeviceDrivers/Conceptual/NetworkDriver/1_Intro/Intro.html</div><div>http://developer.apple.com/documentation/DeviceDrivers/Conceptual/NetworkDriver/4_Writing%20the%20Driver/NetworkController.html</div><div><br /></div><div><a href="http://developer.apple.com/documentation/HardwareDrivers/Conceptual/HWTech_Ethernet/Introduction/ENet_intro.html" rel="nofollow">http://developer.apple.com/documentation/HardwareDrivers/Conceptual/HWTech_Ethernet/Introduction/ENet_intro.html</a></div><div><a href="http://developer.apple.com/documentation/Hardware/Conceptual/HWtech_PCI/Articles/pci_implementation.html" rel="nofollow">http://developer.apple.com/documentation/Hardware/Conceptual/HWtech_PCI/Articles/pci_implementation.html</a></div><div><a href="http://developer.apple.com/documentation/Darwin/Conceptual/NetworkKernelExtensions/about/about.html" rel="nofollow">http://developer.apple.com/documentation/Darwin/Conceptual/NetworkKernelExtensions/about/about.html</a></div><div><a href="http://developer.apple.com/documentation/Darwin/Conceptual/KEXTConcept/KEXTConceptIntro/KEXTIntro.html" rel="nofollow">http://developer.apple.com/documentation/Darwin/Conceptual/KEXTConcept/KEXTConceptIntro/KEXTIntro.html</a></div><div><a href="http://developer.apple.com/documentation/DeviceDrivers/Conceptual/WritingPCIDrivers/pci_device/pci_device.html" rel="nofollow">http://developer.apple.com/documentation/DeviceDrivers/Conceptual/WritingPCIDrivers/pci_device/pci_device.html</a></div><div><a href="http://download.intel.com/design/network/manuals/8255X_OpenSDM.pdf" rel="nofollow">http://download.intel.com/design/network/manuals/8255X_OpenSDM.pdf</a></div><div><br /></div><div><a href="https://code.google.com/p/pcnet32-driver-for-puredarwin/" target="_blank">https://code.google.com/p/pcnet32-driver-for-puredarwin/</a> - <b><font color="#ff0000">information about this driver still needs to be worked into this page</font></b></div><div><br /></div>
</div>
</div>
</div></div></div></div></div></td></tr></tbody></table>
</div> 
</div> 
<div id="sites-canvas-bottom-panel">
<div xmlns="http://www.w3.org/1999/xhtml" id="COMP_page-subpages"> </div>
</div>
</div> 
</td> 
</tr>
</table> 
</div> 
</div> 
<div id="sites-chrome-footer-wrapper">
<div id="sites-chrome-footer-wrapper-inside">
<div id="sites-chrome-footer">
</div>
</div>
</div>
</div> 
</div> 
<div id="sites-chrome-adminfooter-container">
<div xmlns="http://www.w3.org/1999/xhtml" class="sites-adminfooter"><p><a class="sites-system-link" href="https://www.google.com/a/UniversalLogin?service=jotspot&amp;continue=http://sites.google.com/a/puredarwin.org/puredarwin/developers/vmware">Sign in</a>|<a class="sites-system-link" href="/system/app/pages/reportAbuse" target="_blank">Report Abuse</a>|<a class="sites-system-link" href="javascript:;" onclick="window.open(webspace.printUrl)">Print Page</a>|<a class="sites-system-link" href="/system/app/pages/removeAccess" target="_blank">Remove Access</a>|<span class="sites-system-link">Powered By</span> <b class="powered-by"><a href="http://sites.google.com">Google Sites</a></b></p></div>
</div>
</div> 
</div> 
<div id="sites-chrome-onebar-footer">
</div>

<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('sjl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" src="http://www.gstatic.com/sites/p/d24ef8/system/js/jot_min_view__en.js"></script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    window.jstiming.load.tick('jl');
  </script>
<script xmlns="http://www.w3.org/1999/xhtml">
    
        sites.core.Analytics.createTracker();
        sites.core.Analytics.trackPageview();
      
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
                    sites.Searchbox.initialize(
                        'sites-searchbox-search-button',
                        {"object":[]}['object'],
                        'search-site',
                        {"label":"Configure search options...","url":"/system/app/pages/admin/settings"});
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
      gsites.HoverPopupMenu.createSiteDropdownMenus('sites-header-nav-dropdown', false);
    </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
            JOT_setupNav("5443624057807028", "Navigation", false);
            JOT_addListener('titleChange', 'JOT_NAVIGATION_titleChange', 'COMP_5443624057807028');
          </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
          JOT_addListener('titleChange', 'JOT_RECENTCHANGES_titleChange', 'COMP_8098985916003585');
        </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
  setTimeout(function() {
    var fingerprint = gsites.date.TimeZone.getFingerprint([]);
    gsites.Xhr.send('http://www.puredarwin.org/_/tz', null, null, 'GET', null, null, { afjstz: fingerprint });
  }, 500);
</script>
<script xmlns="http://www.w3.org/1999/xhtml">
                    window.onload = function() {
                      if (false) {
                        JOT_setMobilePreview();
                      }
                      var loadTimer = window.jstiming.load;
                      loadTimer.tick("ol");
                      loadTimer["name"] = "load," + webspace.page.type;
                      window.jstiming.report(loadTimer, {}, 'http://csi.gstatic.com/csi');
                    }
                  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
        JOT_insertAnalyticsCode(false);
      </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    var maestroRunner = new gsites.pages.view.SitesMaestroRunner(
        webspace, "en");
    maestroRunner.initListeners();
    maestroRunner.installEditRender();
  </script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" defer="true">
  //<![CDATA[
    // Decorate any fastUI buttons on the page with a class of 'goog-button'.
    if (webspace.user.hasWriteAccess) {
      JOT_decorateButtons();
    }

    // Fires delayed events.
    (function() {
      JOT_fullyLoaded = true;
      var delayedEvents = JOT_delayedEvents;
      for (var x = 0; x < delayedEvents.length; x++) {
        var event = delayedEvents[x];
        JOT_postEvent(event.eventName, event.eventSrc, event.payload);
      }
      JOT_delayedEvents = null;
      JOT_postEvent('pageLoaded');
    })();
 //]]>
</script>
<script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
    JOT_postEvent('decorateGvizCharts');
  </script>
<script type="text/javascript">
              JOT_postEvent('renderPlus', null, 'sites-chrome-main');
            </script>
<div id="server-timer-div" style="display:none"> </div>
<script>
          window.jstiming.load.tick('render');
        </script>
</body>
</html>
